"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.W3C_ELEMENT_KEY = exports.MJSONWP_ELEMENT_KEY = void 0;

require("source-map-support/register");

var _lodash = _interopRequireDefault(require("lodash"));

var _bluebird = _interopRequireDefault(require("bluebird"));

var _vm = require("vm2");

var _support = require("appium/support");

var _webdriverio = require("webdriverio");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const log = _support.logger.getLogger('ExecuteDriver Child');

let send;
const W3C_ELEMENT_KEY = _support.util.W3C_WEB_ELEMENT_IDENTIFIER;
exports.W3C_ELEMENT_KEY = W3C_ELEMENT_KEY;
const MJSONWP_ELEMENT_KEY = 'ELEMENT';
exports.MJSONWP_ELEMENT_KEY = MJSONWP_ELEMENT_KEY;

async function runScript(driverOpts, script, timeoutMs) {
  if (!_lodash.default.isNumber(timeoutMs)) {
    throw new TypeError('Timeout parameter must be a number');
  }

  const logLevels = ['error', 'warn', 'log'];
  const logs = {};
  const consoleFns = {};

  for (const level of logLevels) {
    logs[level] = [];

    consoleFns[level] = (...logMsgs) => logs[level].push(...logMsgs);
  }

  const driver = await (0, _webdriverio.attach)(driverOpts);
  const fullScript = buildScript(script);
  log.info('Running driver script in Node vm');
  const vmCtx = new _vm.NodeVM({
    timeout: timeoutMs
  });
  const vmFn = vmCtx.run(fullScript);
  let result = await vmFn(driver, consoleFns, _bluebird.default);
  result = coerceScriptResult(result);
  log.info('Successfully ensured driver script result is appropriate type for return');
  return {
    result,
    logs
  };
}

function buildScript(script) {
  return `module.exports = async function execute (driver, console, Promise) {
    ${script}
  }`;
}

function coerceScriptResult(obj) {
  try {
    obj = JSON.parse(JSON.stringify(obj));
  } catch (e) {
    log.warn('Could not convert executeDriverScript to safe response!' + `Result was: ${JSON.stringify(obj)}. Will make it null`);
    return null;
  }

  let res;

  if (_lodash.default.isPlainObject(obj)) {
    res = {};

    if (obj[MJSONWP_ELEMENT_KEY] || obj[W3C_ELEMENT_KEY]) {
      if (obj[MJSONWP_ELEMENT_KEY]) {
        res[MJSONWP_ELEMENT_KEY] = obj[MJSONWP_ELEMENT_KEY];
      }

      if (obj[W3C_ELEMENT_KEY]) {
        res[W3C_ELEMENT_KEY] = obj[W3C_ELEMENT_KEY];
      }

      return res;
    }

    for (const key of Object.keys(obj)) {
      res[key] = coerceScriptResult(obj[key]);
    }

    return res;
  }

  if (_lodash.default.isArray(obj)) {
    return obj.map(coerceScriptResult);
  }

  return obj;
}

async function main(driverOpts, script, timeoutMs) {
  let res;

  try {
    res = {
      success: await runScript(driverOpts, script, timeoutMs)
    };
  } catch (error) {
    res = {
      error: {
        message: error.message,
        stack: error.stack
      }
    };
  }

  await send(res);
}

if (require.main === module && _lodash.default.isFunction(process.send)) {
  send = _bluebird.default.promisify(process.send, {
    context: process
  });
  log.info('Running driver execution in child process');
  process.on('message', ({
    driverOpts,
    script,
    timeoutMs
  }) => {
    log.info('Parameters received from parent process');
    main(driverOpts, script, timeoutMs);
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJsb2ciLCJsb2dnZXIiLCJnZXRMb2dnZXIiLCJzZW5kIiwiVzNDX0VMRU1FTlRfS0VZIiwidXRpbCIsIlczQ19XRUJfRUxFTUVOVF9JREVOVElGSUVSIiwiTUpTT05XUF9FTEVNRU5UX0tFWSIsInJ1blNjcmlwdCIsImRyaXZlck9wdHMiLCJzY3JpcHQiLCJ0aW1lb3V0TXMiLCJfIiwiaXNOdW1iZXIiLCJUeXBlRXJyb3IiLCJsb2dMZXZlbHMiLCJsb2dzIiwiY29uc29sZUZucyIsImxldmVsIiwibG9nTXNncyIsInB1c2giLCJkcml2ZXIiLCJhdHRhY2giLCJmdWxsU2NyaXB0IiwiYnVpbGRTY3JpcHQiLCJpbmZvIiwidm1DdHgiLCJOb2RlVk0iLCJ0aW1lb3V0Iiwidm1GbiIsInJ1biIsInJlc3VsdCIsIkIiLCJjb2VyY2VTY3JpcHRSZXN1bHQiLCJvYmoiLCJKU09OIiwicGFyc2UiLCJzdHJpbmdpZnkiLCJlIiwid2FybiIsInJlcyIsImlzUGxhaW5PYmplY3QiLCJrZXkiLCJPYmplY3QiLCJrZXlzIiwiaXNBcnJheSIsIm1hcCIsIm1haW4iLCJzdWNjZXNzIiwiZXJyb3IiLCJtZXNzYWdlIiwic3RhY2siLCJyZXF1aXJlIiwibW9kdWxlIiwiaXNGdW5jdGlvbiIsInByb2Nlc3MiLCJwcm9taXNpZnkiLCJjb250ZXh0Iiwib24iXSwic291cmNlcyI6WyIuLi8uLi9saWIvZXhlY3V0ZS1jaGlsZC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IEIgZnJvbSAnYmx1ZWJpcmQnO1xuaW1wb3J0IHtOb2RlVk19IGZyb20gJ3ZtMic7XG5pbXBvcnQge2xvZ2dlciwgdXRpbH0gZnJvbSAnYXBwaXVtL3N1cHBvcnQnO1xuaW1wb3J0IHthdHRhY2h9IGZyb20gJ3dlYmRyaXZlcmlvJztcblxuY29uc3QgbG9nID0gbG9nZ2VyLmdldExvZ2dlcignRXhlY3V0ZURyaXZlciBDaGlsZCcpO1xubGV0IHNlbmQ7XG5cbi8vIGR1cGxpY2F0ZSBkZWZpbmluZyB0aGVzZSBrZXlzIGhlcmUgc28gd2UgZG9uJ3QgbmVlZCB0byByZS1sb2FkIGEgaHVnZSBhcHBpdW1cbi8vIGRlcGVuZGVuY3kgdHJlZSBpbnRvIG1lbW9yeSBqdXN0IHRvIHJ1biBhIHdkaW8gc2NyaXB0XG5leHBvcnQgY29uc3QgVzNDX0VMRU1FTlRfS0VZID0gdXRpbC5XM0NfV0VCX0VMRU1FTlRfSURFTlRJRklFUjtcbmV4cG9ydCBjb25zdCBNSlNPTldQX0VMRU1FTlRfS0VZID0gJ0VMRU1FTlQnO1xuXG5hc3luYyBmdW5jdGlvbiBydW5TY3JpcHQoZHJpdmVyT3B0cywgc2NyaXB0LCB0aW1lb3V0TXMpIHtcbiAgaWYgKCFfLmlzTnVtYmVyKHRpbWVvdXRNcykpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaW1lb3V0IHBhcmFtZXRlciBtdXN0IGJlIGEgbnVtYmVyJyk7XG4gIH1cblxuICAvLyBzZXQgdXAgZmFrZSBsb2dnZXJcbiAgY29uc3QgbG9nTGV2ZWxzID0gWydlcnJvcicsICd3YXJuJywgJ2xvZyddO1xuICBjb25zdCBsb2dzID0ge307XG4gIGNvbnN0IGNvbnNvbGVGbnMgPSB7fTtcbiAgZm9yIChjb25zdCBsZXZlbCBvZiBsb2dMZXZlbHMpIHtcbiAgICBsb2dzW2xldmVsXSA9IFtdO1xuICAgIGNvbnNvbGVGbnNbbGV2ZWxdID0gKC4uLmxvZ01zZ3MpID0+IGxvZ3NbbGV2ZWxdLnB1c2goLi4ubG9nTXNncyk7XG4gIH1cblxuICBjb25zdCBkcml2ZXIgPSBhd2FpdCBhdHRhY2goZHJpdmVyT3B0cyk7XG5cbiAgY29uc3QgZnVsbFNjcmlwdCA9IGJ1aWxkU2NyaXB0KHNjcmlwdCk7XG5cbiAgbG9nLmluZm8oJ1J1bm5pbmcgZHJpdmVyIHNjcmlwdCBpbiBOb2RlIHZtJyk7XG5cbiAgY29uc3Qgdm1DdHggPSBuZXcgTm9kZVZNKHt0aW1lb3V0OiB0aW1lb3V0TXN9KTtcbiAgY29uc3Qgdm1GbiA9IHZtQ3R4LnJ1bihmdWxsU2NyaXB0KTtcblxuICAvLyBydW4gdGhlIGRyaXZlciBzY3JpcHQsIGdpdmluZyB1c2VyIGFjY2VzcyB0byB0aGUgZHJpdmVyIG9iamVjdCwgYSBmYWtlXG4gIC8vIGNvbnNvbGUgbG9nZ2VyLCBhbmQgYSBwcm9taXNlIGxpYnJhcnlcbiAgbGV0IHJlc3VsdCA9IGF3YWl0IHZtRm4oZHJpdmVyLCBjb25zb2xlRm5zLCBCKTtcblxuICByZXN1bHQgPSBjb2VyY2VTY3JpcHRSZXN1bHQocmVzdWx0KTtcbiAgbG9nLmluZm8oJ1N1Y2Nlc3NmdWxseSBlbnN1cmVkIGRyaXZlciBzY3JpcHQgcmVzdWx0IGlzIGFwcHJvcHJpYXRlIHR5cGUgZm9yIHJldHVybicpO1xuICByZXR1cm4ge3Jlc3VsdCwgbG9nc307XG59XG5cbi8qKlxuICogRW1iZWQgYSB1c2VyLWdlbmVyYXRlZCBzY3JpcHQgaW5zaWRlIGEgbWV0aG9kIHdoaWNoIHRha2VzIG9ubHkgdGhlXG4gKiBwcmVkZXRlcm1pbmVkIG9iamVjdHMgd2Ugc3BlY2lmeVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBzY3JpcHQgLSB0aGUgamF2YXNjcmlwdCB0byBleGVjdXRlXG4gKlxuICogQHJldHVybiB7c3RyaW5nfSAtIHRoZSBmdWxsIHNjcmlwdCB0byBleGVjdXRlXG4gKi9cbmZ1bmN0aW9uIGJ1aWxkU2NyaXB0KHNjcmlwdCkge1xuICByZXR1cm4gYG1vZHVsZS5leHBvcnRzID0gYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZSAoZHJpdmVyLCBjb25zb2xlLCBQcm9taXNlKSB7XG4gICAgJHtzY3JpcHR9XG4gIH1gO1xufVxuXG4vKipcbiAqIFdlIGNhbiBnZXQgYW55IG1hbm5lciBvZiBjcmF6eSB0aGluZyBiYWNrIGZyb20gYSB2bSBleGVjdXRpbmcgdW50cnVzdGVkXG4gKiBjb2RlLiBXZSBtaWdodCBhbHNvIGdldCBXZWJkcml2ZXJJTyBvYmplY3RzIHRoYXQgYXJlbid0IHN1aXRhYmxlIGZvciBKU09OXG4gKiByZXNwb25zZS4gU28gbWFrZSBzdXJlIHdlIGNvbnZlcnQgdGhlIHRoaW5ncyB3ZSBrbm93IGFib3V0IHRvIHRoZWlyXG4gKiBhcHByb3ByaWF0ZSByZXNwb25zZSBmb3JtYXQsIGFuZCBzcXVhc2ggb3RoZXIgd2VpcmQgdGhpbmdzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmogLSBvYmplY3QgdG8gY29udmVydCBhbmQgc2FuaXRpemVcbiAqXG4gKiBAcmV0dXJuIHtPYmplY3R9IC0gc2FmZWx5IGNvbnZlcnRlZCBvYmplY3RcbiAqL1xuZnVuY3Rpb24gY29lcmNlU2NyaXB0UmVzdWx0KG9iaikge1xuICAvLyBmaXJzdCBlbnN1cmUgb2JqIGlzIG9mIGEgdHlwZSB0aGF0IGNhbiBiZSBKU09OIGVuY29kZWQgc2FmZWx5LiBUaGlzIHdpbGxcbiAgLy8gZ2V0IHJpZCBvZiBjdXN0b20gb2JqZWN0cywgZnVuY3Rpb25zLCBldGMuLi4gYW5kIHR1cm4gdGhlbSBpbnRvIFBPSk9zXG4gIHRyeSB7XG4gICAgb2JqID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvYmopKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGxvZy53YXJuKFxuICAgICAgJ0NvdWxkIG5vdCBjb252ZXJ0IGV4ZWN1dGVEcml2ZXJTY3JpcHQgdG8gc2FmZSByZXNwb25zZSEnICtcbiAgICAgICAgYFJlc3VsdCB3YXM6ICR7SlNPTi5zdHJpbmdpZnkob2JqKX0uIFdpbGwgbWFrZSBpdCBudWxsYFxuICAgICk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBsZXQgcmVzO1xuXG4gIC8vIG5vdyB3ZSBiZWdpbiBvdXIgcmVjdXJzaXZlIGNhc2Ugb3B0aW9uc1xuICBpZiAoXy5pc1BsYWluT2JqZWN0KG9iaikpIHtcbiAgICAvLyBpZiB3ZSBoYXZlIGFuIG9iamVjdCwgaXQncyBlaXRoZXIgYW4gZWxlbWVudCBvYmplY3Qgb3Igc29tZXRoaW5nIGVsc2VcbiAgICAvLyB3ZWJkcml2ZXJpbyBoYXMgbm8gbW9uYWRpYyBvYmplY3QgdHlwZXMgb3RoZXIgdGhhbiBlbGVtZW50IGFuZCBkcml2ZXIsXG4gICAgLy8gYW5kIHdlIGRvbid0IHdhbnQgdG8gYWxsb3cgc3BlY2lhbCBjYXNpbmcgcmV0dXJuIG9mIGRyaXZlclxuICAgIHJlcyA9IHt9O1xuXG4gICAgaWYgKG9ialtNSlNPTldQX0VMRU1FTlRfS0VZXSB8fCBvYmpbVzNDX0VMRU1FTlRfS0VZXSkge1xuICAgICAgLy8gaWYgaXQncyBhbiBlbGVtZW50IG9iamVjdCwgY2xlYXIgb3V0IGFueXRoaW5nIHRoYXQncyBub3QgdGhlIGtleSwgYW5kIHRoZW4gcmV0dXJuIHRoZVxuICAgICAgLy8gb2JqZWN0LiBOb3RlIHRoYXQgaWYgdGhlIGVsZW1lbnQgb2JqZWN0IGNvbnRhaW5zIG9ubHkgb25lIGVsZW1lbnQga2V5IHR5cGUgKE1KU09OV1Agb3JcbiAgICAgIC8vIFczQyksIGtlZXAgaXQgdGhhdCB3YXkgaW4gb3VyIHJlc3BvbnNlLiBCdXQgaWYgdGhlIGVsZW1lbnQgY29udGFpbnMgYm90aCBrZXkgdHlwZXNcbiAgICAgIC8vIChiZWNhdXNlIHRoZSBjbGllbnQgaXMgYmVpbmcgYmFja3dhcmRzIGNvbXBhdGlibGUpIHRoZW4ga2VlcCBib3RoIGtleXMgaW4gb3VyIHJlc3BvbnNlIGFzXG4gICAgICAvLyB3ZWxsLlxuICAgICAgaWYgKG9ialtNSlNPTldQX0VMRU1FTlRfS0VZXSkge1xuICAgICAgICByZXNbTUpTT05XUF9FTEVNRU5UX0tFWV0gPSBvYmpbTUpTT05XUF9FTEVNRU5UX0tFWV07XG4gICAgICB9XG5cbiAgICAgIGlmIChvYmpbVzNDX0VMRU1FTlRfS0VZXSkge1xuICAgICAgICByZXNbVzNDX0VMRU1FTlRfS0VZXSA9IG9ialtXM0NfRUxFTUVOVF9LRVldO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG5cbiAgICAvLyBvdGhlcndpc2UsIHJlY3Vyc2UgaW50byB0aGUgb2JqZWN0XG4gICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMob2JqKSkge1xuICAgICAgcmVzW2tleV0gPSBjb2VyY2VTY3JpcHRSZXN1bHQob2JqW2tleV0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xuICB9XG5cbiAgLy8gYWxzbyBoYW5kbGUgYXJyYXlzXG4gIGlmIChfLmlzQXJyYXkob2JqKSkge1xuICAgIHJldHVybiBvYmoubWFwKGNvZXJjZVNjcmlwdFJlc3VsdCk7XG4gIH1cblxuICAvLyBiYXNlIGNhc2UsIGlmIGl0J3Mgbm90IGFuIG9iamVjdCBvciBhcnJheSwgcmV0dXJuIHN0cmFpZ2h0YXdheVxuICByZXR1cm4gb2JqO1xufVxuXG5hc3luYyBmdW5jdGlvbiBtYWluKGRyaXZlck9wdHMsIHNjcmlwdCwgdGltZW91dE1zKSB7XG4gIGxldCByZXM7XG4gIHRyeSB7XG4gICAgcmVzID0ge3N1Y2Nlc3M6IGF3YWl0IHJ1blNjcmlwdChkcml2ZXJPcHRzLCBzY3JpcHQsIHRpbWVvdXRNcyl9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJlcyA9IHtlcnJvcjoge21lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsIHN0YWNrOiBlcnJvci5zdGFja319O1xuICB9XG4gIGF3YWl0IHNlbmQocmVzKTtcbn1cblxuLy8gZW5zdXJlIHdlJ3JlIHJ1bm5pbmcgdGhpcyBzY3JpcHQgaW4gSVBDIG1vZGVcbmlmIChyZXF1aXJlLm1haW4gPT09IG1vZHVsZSAmJiBfLmlzRnVuY3Rpb24ocHJvY2Vzcy5zZW5kKSkge1xuICBzZW5kID0gQi5wcm9taXNpZnkocHJvY2Vzcy5zZW5kLCB7Y29udGV4dDogcHJvY2Vzc30pO1xuICBsb2cuaW5mbygnUnVubmluZyBkcml2ZXIgZXhlY3V0aW9uIGluIGNoaWxkIHByb2Nlc3MnKTtcbiAgcHJvY2Vzcy5vbignbWVzc2FnZScsICh7ZHJpdmVyT3B0cywgc2NyaXB0LCB0aW1lb3V0TXN9KSA9PiB7XG4gICAgbG9nLmluZm8oJ1BhcmFtZXRlcnMgcmVjZWl2ZWQgZnJvbSBwYXJlbnQgcHJvY2VzcycpO1xuICAgIG1haW4oZHJpdmVyT3B0cywgc2NyaXB0LCB0aW1lb3V0TXMpO1xuICB9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