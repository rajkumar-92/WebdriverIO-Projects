"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
require("source-map-support/register");
var _asyncbox = require("asyncbox");
var _support = require("appium/support");
var _lodash = _interopRequireDefault(require("lodash"));
var _bluebird = _interopRequireDefault(require("bluebird"));
var _driver = require("appium/driver");
var _cookies = _interopRequireDefault(require("../cookies"));
var _events = require("events");
const IPHONE_TOP_BAR_HEIGHT = 71;
const IPHONE_SCROLLED_TOP_BAR_HEIGHT = 41;
const IPHONE_X_SCROLLED_OFFSET = 55;
const IPHONE_X_NOTCH_OFFSET_IOS = 24;
const IPHONE_X_NOTCH_OFFSET_IOS_13 = 20;
const IPHONE_LANDSCAPE_TOP_BAR_HEIGHT = 51;
const IPHONE_BOTTOM_BAR_OFFSET = 49;
const TAB_BAR_OFFSET = 33;
const IPHONE_WEB_COORD_SMART_APP_BANNER_OFFSET = 84;
const IPAD_WEB_COORD_SMART_APP_BANNER_OFFSET = 95;
const NOTCHED_DEVICE_SIZES = [{
  w: 1125,
  h: 2436
},
{
  w: 828,
  h: 1792
},
{
  w: 1242,
  h: 2688
}];

const {
  W3C_WEB_ELEMENT_IDENTIFIER
} = _support.util;
const ATOM_WAIT_TIMEOUT_MS = 2 * 60000;
const ATOM_INITIAL_WAIT_MS = 1000;
const ON_OBSTRUCTING_ALERT_EVENT = 'alert';
const VISIBLE = 'visible';
const INVISIBLE = 'invisible';
const DETECT = 'detect';
const VISIBILITIES = [VISIBLE, INVISIBLE, DETECT];

const TAB_BAR_POSITION_TOP = 'top';
const TAB_BAR_POSITION_BOTTOM = 'bottom';
const TAB_BAR_POSSITIONS = [TAB_BAR_POSITION_TOP, TAB_BAR_POSITION_BOTTOM];
const commands = {},
  helpers = {},
  extensions = {};
function isValidElementIdentifier(id) {
  if (!_lodash.default.isString(id) && !_lodash.default.isNumber(id)) {
    return false;
  }
  if (_lodash.default.isString(id) && _lodash.default.isEmpty(id)) {
    return false;
  }
  if (_lodash.default.isNumber(id) && isNaN(id)) {
    return false;
  }
  return true;
}
commands.setFrame = async function setFrame(frame) {
  if (!this.isWebContext()) {
    throw new _driver.errors.NotImplementedError();
  }
  if (_lodash.default.isNull(frame)) {
    this.curWebFrames = [];
    this.log.debug('Leaving web frame and going back to default content');
    return;
  }
  if (helpers.hasElementId(frame)) {
    const atomsElement = this.getAtomsElement(frame);
    const value = await this.executeAtom('get_frame_window', [atomsElement]);
    this.log.debug(`Entering new web frame: '${value.WINDOW}'`);
    this.curWebFrames.unshift(value.WINDOW);
  } else {
    const atom = _lodash.default.isNumber(frame) ? 'frame_by_index' : 'frame_by_id_or_name';
    const value = await this.executeAtom(atom, [frame]);
    if (_lodash.default.isNull(value) || _lodash.default.isUndefined(value.WINDOW)) {
      throw new _driver.errors.NoSuchFrameError();
    }
    this.log.debug(`Entering new web frame: '${value.WINDOW}'`);
    this.curWebFrames.unshift(value.WINDOW);
  }
};
commands.getCssProperty = async function getCssProperty(propertyName, el) {
  if (!this.isWebContext()) {
    throw new _driver.errors.NotImplementedError();
  }
  const atomsElement = this.getAtomsElement(el);
  return await this.executeAtom('get_value_of_css_property', [atomsElement, propertyName]);
};
commands.submit = async function submit(el) {
  if (!this.isWebContext()) {
    throw new _driver.errors.NotImplementedError();
  }
  const atomsElement = this.getAtomsElement(el);
  await this.executeAtom('submit', [atomsElement]);
};
commands.refresh = async function refresh() {
  if (!this.isWebContext()) {
    throw new _driver.errors.NotImplementedError();
  }
  await this.executeAtom('refresh', []);
};
commands.getUrl = async function getUrl() {
  if (!this.isWebContext()) {
    throw new _driver.errors.NotImplementedError();
  }
  return await this.remote.execute('window.location.href');
};
commands.title = async function title() {
  if (!this.isWebContext()) {
    throw new _driver.errors.NotImplementedError();
  }
  return await this.executeAtom('title', [], true);
};
commands.getCookies = async function getCookies() {
  if (!this.isWebContext()) {
    throw new _driver.errors.NotImplementedError();
  }
  this.log.debug('Retrieving all cookies');
  let script = 'return document.cookie';
  let jsCookies = await this.executeAtom('execute_script', [script, []]);
  let cookies = [];
  try {
    for (let [name, value] of _lodash.default.toPairs(_cookies.default.createJWPCookie(undefined, jsCookies))) {
      cookies.push({
        name,
        value
      });
    }
    return cookies;
  } catch (err) {
    this.log.error(err);
    throw new _driver.errors.UnknownError(`Error parsing cookies from result: '${jsCookies}'`);
  }
};
commands.setCookie = async function setCookie(cookie) {
  if (!this.isWebContext()) {
    throw new _driver.errors.NotImplementedError();
  }
  cookie = _lodash.default.clone(cookie);

  if (!cookie.path) {
    cookie.path = '/';
  }
  const jsCookie = _cookies.default.createJSCookie(cookie.name, cookie.value, {
    expires: _lodash.default.isNumber(cookie.expiry) ? new Date(cookie.expiry * 1000).toUTCString() : cookie.expiry,
    path: cookie.path,
    domain: cookie.domain,
    httpOnly: cookie.httpOnly,
    secure: cookie.secure
  });
  let script = `document.cookie = ${JSON.stringify(jsCookie)}`;
  await this.executeAtom('execute_script', [script, []]);
};
commands.deleteCookie = async function deleteCookie(cookieName) {
  if (!this.isWebContext()) {
    throw new _driver.errors.NotImplementedError();
  }

  let cookies = await this.getCookies();
  if (_lodash.default.indexOf(_lodash.default.map(cookies, 'name'), cookieName) === -1) {
    this.log.debug(`Cookie '${cookieName}' not found. Ignoring.`);
    return true;
  }
  return await this._deleteCookie(cookieName);
};
commands.deleteCookies = async function deleteCookies() {
  if (!this.isWebContext()) {
    throw new _driver.errors.NotImplementedError();
  }
  let cookies = await this.getCookies();
  if (cookies.length) {
    for (let cookie of cookies) {
      await this._deleteCookie(cookie.name);
    }
  }
  return true;
};
helpers._deleteCookie = async function _deleteCookie(cookieName) {
  this.log.debug(`Deleting cookie '${cookieName}'`);
  let webCookie = _cookies.default.expireCookie(cookieName, {
    path: '/'
  });
  let script = `document.cookie = ${JSON.stringify(webCookie)}`;
  await this.executeAtom('execute_script', [script, []]);
};
helpers.cacheWebElement = function cacheWebElement(el) {
  if (!_lodash.default.isPlainObject(el)) {
    return el;
  }
  const elId = _support.util.unwrapElement(el);
  if (!isValidElementIdentifier(elId)) {
    return el;
  }
  const cacheId = _lodash.default.includes(elId, ':') ? elId : _support.util.uuidV4();
  this.webElementsCache.set(cacheId, elId);
  return _support.util.wrapElement(cacheId);
};
helpers.cacheWebElements = function cacheWebElements(response) {
  const toCached = v => _lodash.default.isArray(v) || _lodash.default.isPlainObject(v) ? this.cacheWebElements(v) : v;
  if (_lodash.default.isArray(response)) {
    return response.map(toCached);
  } else if (_lodash.default.isPlainObject(response)) {
    const result = {
      ...response,
      ...this.cacheWebElement(response)
    };
    return _lodash.default.toPairs(result).reduce((acc, [key, value]) => {
      acc[key] = toCached(value);
      return acc;
    }, {});
  }
  return response;
};
extensions.findWebElementOrElements = async function findWebElementOrElements(strategy, selector, many, ctx) {
  const contextElement = _lodash.default.isNil(ctx) ? null : this.getAtomsElement(ctx);
  let element;
  let doFind = async () => {
    element = await this.executeAtom(`find_element${many ? 's' : ''}`, [strategy, selector, contextElement]);
    return !_lodash.default.isNull(element);
  };
  try {
    await this.implicitWaitForCondition(doFind);
  } catch (err) {
    if (err.message && _lodash.default.isFunction(err.message.match) && err.message.match(/Condition unmet/)) {
      element = [];
    } else {
      throw err;
    }
  }
  if (many) {
    return this.cacheWebElements(element);
  }
  if (_lodash.default.isEmpty(element)) {
    throw new _driver.errors.NoSuchElementError();
  }
  return this.cacheWebElements(element);
};
extensions.clickWebCoords = async function clickWebCoords() {
  let coords = await this.translateWebCoords(this.curWebCoords);
  await this.clickCoords(coords);
};
helpers.executeAtom = async function executeAtom(atom, args, alwaysDefaultFrame = false) {
  let frames = alwaysDefaultFrame === true ? [] : this.curWebFrames;
  let promise = this.remote.executeAtom(atom, args, frames);
  return await this.waitForAtom(promise);
};
helpers.executeAtomAsync = async function executeAtomAsync(atom, args, responseUrl) {
  let promise = new _bluebird.default((resolve, reject) => {
    this.asyncPromise = {
      resolve,
      reject
    };
  });
  await this.remote.executeAtomAsync(atom, args, this.curWebFrames, responseUrl);
  return await this.waitForAtom(promise);
};
helpers.getAtomsElement = function getAtomsElement(elOrId) {
  const elId = _support.util.unwrapElement(elOrId);
  if (!this.webElementsCache.has(elId)) {
    throw new _driver.errors.StaleElementReferenceError();
  }
  return {
    ELEMENT: this.webElementsCache.get(elId)
  };
};
helpers.convertElementsForAtoms = function convertElementsForAtoms(args = []) {
  return args.map(arg => {
    if (helpers.hasElementId(arg)) {
      try {
        return this.getAtomsElement(arg);
      } catch (err) {
        if (!(0, _driver.isErrorType)(err, _driver.errors.StaleElementReferenceError)) {
          throw err;
        }
      }
      return arg;
    }
    return _lodash.default.isArray(arg) ? this.convertElementsForAtoms(arg) : arg;
  });
};
helpers.getElementId = function getElementId(element) {
  return element.ELEMENT || element[W3C_WEB_ELEMENT_IDENTIFIER];
};
helpers.hasElementId = function hasElementId(element) {
  return _support.util.hasValue(element) && (_support.util.hasValue(element.ELEMENT) || _support.util.hasValue(element[W3C_WEB_ELEMENT_IDENTIFIER]));
};
extensions.getSafariIsIphone = async function getSafariIsIphone() {
  if (_lodash.default.isBoolean(this._isSafariIphone)) {
    return this._isSafariIphone;
  }
  try {
    const userAgent = await this.execute('return navigator.userAgent');
    this._isSafariIphone = userAgent.toLowerCase().includes('iphone');
  } catch (err) {
    this.log.warn(`Unable to find device type from useragent. Assuming iPhone`);
    this.log.debug(`Error: ${err.message}`);
  }
  return this._isSafariIphone ?? true;
};
extensions.getSafariDeviceSize = async function getSafariDeviceSize() {
  const script = 'return {height: window.screen.availHeight * window.devicePixelRatio, width: window.screen.availWidth * window.devicePixelRatio};';
  const {
    width,
    height
  } = await this.execute(script);
  const [normHeight, normWidth] = height > width ? [height, width] : [width, height];
  return {
    width: normWidth,
    height: normHeight
  };
};
extensions.getSafariIsNotched = async function getSafariIsNotched() {
  if (_lodash.default.isBoolean(this._isSafariNotched)) {
    return this._isSafariNotched;
  }
  try {
    const {
      width,
      height
    } = await this.getSafariDeviceSize();
    for (const device of NOTCHED_DEVICE_SIZES) {
      if (device.w === width && device.h === height) {
        this._isSafariNotched = true;
      }
    }
  } catch (err) {
    this.log.warn(`Unable to find device type from dimensions. Assuming the device is not notched`);
    this.log.debug(`Error: ${err.message}`);
  }
  return this._isSafariNotched ?? false;
};
extensions.getExtraTranslateWebCoordsOffset = async function getExtraTranslateWebCoordsOffset(wvPos, realDims) {
  let topOffset = 0;
  let bottomOffset = 0;
  const isIphone = await this.getSafariIsIphone();

  const {
    nativeWebTapTabBarVisibility,
    nativeWebTapSmartAppBannerVisibility,
    safariTabBarPosition = _support.util.compareVersions(this.opts.platformVersion, '>=', '15.0') && isIphone ? TAB_BAR_POSITION_BOTTOM : TAB_BAR_POSITION_TOP
  } = await this.settings.getSettings();
  let tabBarVisibility = _lodash.default.lowerCase(nativeWebTapTabBarVisibility);
  let bannerVisibility = _lodash.default.lowerCase(nativeWebTapSmartAppBannerVisibility);
  const tabBarPosition = _lodash.default.lowerCase(safariTabBarPosition);
  if (!VISIBILITIES.includes(tabBarVisibility)) {
    tabBarVisibility = DETECT;
  }
  if (!VISIBILITIES.includes(bannerVisibility)) {
    bannerVisibility = DETECT;
  }
  if (!TAB_BAR_POSSITIONS.includes(tabBarPosition)) {
    throw new _driver.errors.InvalidArgumentError(`${safariTabBarPosition} is invalid as Safari tab bar position. Available positions are ${TAB_BAR_POSSITIONS}.`);
  }
  const isNotched = isIphone && (await this.getSafariIsNotched());
  const orientation = realDims.h > realDims.w ? 'PORTRAIT' : 'LANDSCAPE';
  const notchOffset = isNotched ? _support.util.compareVersions(this.opts.platformVersion, '=', '13.0') ? IPHONE_X_NOTCH_OFFSET_IOS_13 : IPHONE_X_NOTCH_OFFSET_IOS : 0;
  const isScrolled = await this.execute('return document.documentElement.scrollTop > 0');
  if (isScrolled) {
    topOffset = IPHONE_SCROLLED_TOP_BAR_HEIGHT + notchOffset;
    if (isNotched) {
      topOffset -= IPHONE_X_SCROLLED_OFFSET;
    }

    if (orientation === 'LANDSCAPE' && isIphone) {
      topOffset = 0;
    }
  } else {
    topOffset = tabBarPosition === TAB_BAR_POSITION_BOTTOM ? 0 : IPHONE_TOP_BAR_HEIGHT;
    topOffset += notchOffset;
    this.log.debug(`tabBarPosition and topOffset: ${tabBarPosition}, ${topOffset}`);
    if (isIphone) {
      if (orientation === 'PORTRAIT') {
        bottomOffset = IPHONE_BOTTOM_BAR_OFFSET;
      } else {
        topOffset = IPHONE_LANDSCAPE_TOP_BAR_HEIGHT;
      }
    }
    if (orientation === 'LANDSCAPE' || !isIphone) {
      if (tabBarVisibility === VISIBLE) {
        topOffset += TAB_BAR_OFFSET;
      } else if (tabBarVisibility === DETECT) {
        const contextsAndViews = await this.getContextsAndViews();
        const tabs = contextsAndViews.filter(ctx => ctx.id.startsWith('WEBVIEW_'));
        if (tabs.length > 1) {
          this.log.debug(`Found ${tabs.length} tabs. Assuming the tab bar is visible`);
          topOffset += TAB_BAR_OFFSET;
        }
      }
    }
  }
  topOffset += await this.getExtraNativeWebTapOffset(isIphone, bannerVisibility);
  wvPos.y += topOffset;
  realDims.h -= topOffset + bottomOffset;
};
extensions.getExtraNativeWebTapOffset = async function getExtraNativeWebTapOffset(isIphone, bannerVisibility) {
  let offset = 0;
  if (bannerVisibility === VISIBLE) {
    offset += isIphone ? IPHONE_WEB_COORD_SMART_APP_BANNER_OFFSET : IPAD_WEB_COORD_SMART_APP_BANNER_OFFSET;
  } else if (bannerVisibility === DETECT) {
    const banners = await this.findNativeElementOrElements('accessibility id', 'Close app download offer', true);
    if (banners.length > 0) {
      offset += isIphone ? IPHONE_WEB_COORD_SMART_APP_BANNER_OFFSET : IPAD_WEB_COORD_SMART_APP_BANNER_OFFSET;
    }
  }
  this.log.debug(`Additional native web tap offset computed: ${offset}`);
  return offset;
};
async function tapWebElementNatively(driver, atomsElement) {
  try {
    let text = await driver.executeAtom('get_text', [atomsElement]);
    if (!text) {
      text = await driver.executeAtom('get_attribute_value', [atomsElement, 'value']);
    }
    if (text) {
      const els = await driver.findNativeElementOrElements('accessibility id', text, true);
      if (els.length === 1 || els.length === 2) {
        const el = els[0];
        const rect = await driver.proxyCommand(`/element/${_support.util.unwrapElement(el)}/rect`, 'GET');
        if (els.length === 2) {
          const el2 = els[1];
          const rect2 = await driver.proxyCommand(`/element/${_support.util.unwrapElement(el2)}/rect`, 'GET');
          if (rect.x !== rect2.x || rect.y !== rect2.y || rect.width !== rect2.width || rect.height !== rect2.height) {
            return false;
          }
        }
        const coords = {
          x: Math.round(rect.x + rect.width / 2),
          y: Math.round(rect.y + rect.height / 2)
        };
        await driver.clickCoords(coords);
        return true;
      }
    }
  } catch (err) {
    driver.log.warn(`Error attempting to click: ${err.message}`);
  }
  return false;
}
extensions.nativeWebTap = async function nativeWebTap(el) {
  const atomsElement = this.getAtomsElement(el);

  if (!(await this.settings.getSettings()).nativeWebTapStrict && (await tapWebElementNatively(this, atomsElement))) {
    return;
  }
  this.log.warn('Unable to do simple native web tap. Attempting to convert coordinates');

  await _bluebird.default.Promise.all([this.executeAtom('get_size', [atomsElement]), this.executeAtom('get_top_left_coordinates', [atomsElement])]);
  const [size, coordinates] = await _bluebird.default.Promise.all([this.executeAtom('get_size', [atomsElement]), this.executeAtom('get_top_left_coordinates', [atomsElement])]);
  const {
    width,
    height
  } = size;
  let {
    x,
    y
  } = coordinates;
  x += width / 2;
  y += height / 2;
  this.curWebCoords = {
    x,
    y
  };
  await this.clickWebCoords();
};
extensions.clickCoords = async function clickCoords(coords) {
  await this.performTouch([{
    action: 'tap',
    options: coords
  }]);
};
extensions.translateWebCoords = async function translateWebCoords(coords) {
  this.log.debug(`Translating coordinates (${JSON.stringify(coords)}) to web coordinates`);

  let webview;
  try {
    webview = await (0, _asyncbox.retryInterval)(5, 100, async () => await this.findNativeElementOrElements('class name', 'XCUIElementTypeWebView', false));
  } catch (ign) {}
  if (!webview) {
    throw new Error(`No WebView found. Unable to translate web coordinates for native web tap.`);
  }
  webview = _support.util.unwrapElement(webview);
  const rect = await this.proxyCommand(`/element/${webview}/rect`, 'GET');
  const wvPos = {
    x: rect.x,
    y: rect.y
  };
  const realDims = {
    w: rect.width,
    h: rect.height
  };
  const cmd = '(function () { return {w: window.innerWidth, h: window.innerHeight}; })()';
  const wvDims = await this.remote.execute(cmd);

  const implicitWaitMs = this.implicitWaitMs;
  await this.setImplicitWait(0);
  try {
    await this.getExtraTranslateWebCoordsOffset(wvPos, realDims);
  } finally {
    await this.setImplicitWait(implicitWaitMs);
  }
  if (wvDims && realDims && wvPos) {
    let xRatio = realDims.w / wvDims.w;
    let yRatio = realDims.h / wvDims.h;
    let newCoords = {
      x: wvPos.x + Math.round(xRatio * coords.x),
      y: wvPos.y + Math.round(yRatio * coords.y)
    };

    this.log.debug(`Converted coordinates: ${JSON.stringify(newCoords)}`);
    this.log.debug(`    rect: ${JSON.stringify(rect)}`);
    this.log.debug(`    wvPos: ${JSON.stringify(wvPos)}`);
    this.log.debug(`    realDims: ${JSON.stringify(realDims)}`);
    this.log.debug(`    wvDims: ${JSON.stringify(wvDims)}`);
    this.log.debug(`    xRatio: ${JSON.stringify(xRatio)}`);
    this.log.debug(`    yRatio: ${JSON.stringify(yRatio)}`);
    this.log.debug(`Converted web coords ${JSON.stringify(coords)} ` + `into real coords ${JSON.stringify(newCoords)}`);
    return newCoords;
  }
};
extensions.checkForAlert = async function checkForAlert() {
  return _lodash.default.isString(await this.getAlertText());
};
extensions.waitForAtom = async function waitForAtom(promise) {
  const timer = new _support.timing.Timer().start();

  const timedAtomPromise = _bluebird.default.resolve(promise).timeout(ATOM_WAIT_TIMEOUT_MS);
  const handlePromiseError = async p => {
    try {
      return await p;
    } catch (err) {
      const originalError = err instanceof _bluebird.default.AggregateError ? err[0] : err;
      this.log.debug(`Error received while executing atom: ${originalError.message}`);
      if (originalError instanceof _bluebird.default.TimeoutError) {
        throw new Error(`Did not get any response for atom execution after ` + `${timer.getDuration().asMilliSeconds.toFixed(0)}ms`);
      }
      throw originalError;
    }
  };
  await handlePromiseError(_bluebird.default.any([_bluebird.default.delay(ATOM_INITIAL_WAIT_MS), timedAtomPromise]));
  if (timedAtomPromise.isFulfilled()) {
    return await timedAtomPromise;
  }

  if (!_lodash.default.isPlainObject(this._waitingAtoms)) {
    this._waitingAtoms = {
      count: 0,
      alertNotifier: new _events.EventEmitter(),
      alertMonitor: _bluebird.default.resolve()
    };
  }
  this._waitingAtoms.count++;
  let onAlertCallback;
  try {
    if (this._waitingAtoms.alertMonitor.isResolved()) {
      this._waitingAtoms.alertMonitor = _bluebird.default.resolve((async () => {
        while (this._waitingAtoms.count > 0) {
          try {
            if (await this.checkForAlert()) {
              this._waitingAtoms.alertNotifier.emit(ON_OBSTRUCTING_ALERT_EVENT);
            }
          } catch (ign) {}
          await _bluebird.default.delay(ATOM_INITIAL_WAIT_MS / 2);
        }
      })());
    }
    return await new _bluebird.default((resolve, reject) => {
      onAlertCallback = () => reject(new _driver.errors.UnexpectedAlertOpenError());
      this._waitingAtoms.alertNotifier.once(ON_OBSTRUCTING_ALERT_EVENT, onAlertCallback);
      handlePromiseError(timedAtomPromise)
      .then(resolve).catch(reject);
    });
  } finally {
    if (onAlertCallback) {
      this._waitingAtoms.alertNotifier.removeListener(ON_OBSTRUCTING_ALERT_EVENT, onAlertCallback);
    }
    this._waitingAtoms.count--;
  }
};
extensions.mobileWebNav = async function mobileWebNav(navType) {
  this.remote.allowNavigationWithoutReload = true;
  try {
    await this.executeAtom('execute_script', [`history.${navType}();`, null]);
  } finally {
    this.remote.allowNavigationWithoutReload = false;
  }
};
Object.assign(commands, extensions, helpers);
var _default = commands;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJJUEhPTkVfVE9QX0JBUl9IRUlHSFQiLCJJUEhPTkVfU0NST0xMRURfVE9QX0JBUl9IRUlHSFQiLCJJUEhPTkVfWF9TQ1JPTExFRF9PRkZTRVQiLCJJUEhPTkVfWF9OT1RDSF9PRkZTRVRfSU9TIiwiSVBIT05FX1hfTk9UQ0hfT0ZGU0VUX0lPU18xMyIsIklQSE9ORV9MQU5EU0NBUEVfVE9QX0JBUl9IRUlHSFQiLCJJUEhPTkVfQk9UVE9NX0JBUl9PRkZTRVQiLCJUQUJfQkFSX09GRlNFVCIsIklQSE9ORV9XRUJfQ09PUkRfU01BUlRfQVBQX0JBTk5FUl9PRkZTRVQiLCJJUEFEX1dFQl9DT09SRF9TTUFSVF9BUFBfQkFOTkVSX09GRlNFVCIsIk5PVENIRURfREVWSUNFX1NJWkVTIiwidyIsImgiLCJXM0NfV0VCX0VMRU1FTlRfSURFTlRJRklFUiIsInV0aWwiLCJBVE9NX1dBSVRfVElNRU9VVF9NUyIsIkFUT01fSU5JVElBTF9XQUlUX01TIiwiT05fT0JTVFJVQ1RJTkdfQUxFUlRfRVZFTlQiLCJWSVNJQkxFIiwiSU5WSVNJQkxFIiwiREVURUNUIiwiVklTSUJJTElUSUVTIiwiVEFCX0JBUl9QT1NJVElPTl9UT1AiLCJUQUJfQkFSX1BPU0lUSU9OX0JPVFRPTSIsIlRBQl9CQVJfUE9TU0lUSU9OUyIsImNvbW1hbmRzIiwiaGVscGVycyIsImV4dGVuc2lvbnMiLCJpc1ZhbGlkRWxlbWVudElkZW50aWZpZXIiLCJpZCIsIl8iLCJpc1N0cmluZyIsImlzTnVtYmVyIiwiaXNFbXB0eSIsImlzTmFOIiwic2V0RnJhbWUiLCJmcmFtZSIsImlzV2ViQ29udGV4dCIsImVycm9ycyIsIk5vdEltcGxlbWVudGVkRXJyb3IiLCJpc051bGwiLCJjdXJXZWJGcmFtZXMiLCJsb2ciLCJkZWJ1ZyIsImhhc0VsZW1lbnRJZCIsImF0b21zRWxlbWVudCIsImdldEF0b21zRWxlbWVudCIsInZhbHVlIiwiZXhlY3V0ZUF0b20iLCJXSU5ET1ciLCJ1bnNoaWZ0IiwiYXRvbSIsImlzVW5kZWZpbmVkIiwiTm9TdWNoRnJhbWVFcnJvciIsImdldENzc1Byb3BlcnR5IiwicHJvcGVydHlOYW1lIiwiZWwiLCJzdWJtaXQiLCJyZWZyZXNoIiwiZ2V0VXJsIiwicmVtb3RlIiwiZXhlY3V0ZSIsInRpdGxlIiwiZ2V0Q29va2llcyIsInNjcmlwdCIsImpzQ29va2llcyIsImNvb2tpZXMiLCJuYW1lIiwidG9QYWlycyIsImNvb2tpZVV0aWxzIiwiY3JlYXRlSldQQ29va2llIiwidW5kZWZpbmVkIiwicHVzaCIsImVyciIsImVycm9yIiwiVW5rbm93bkVycm9yIiwic2V0Q29va2llIiwiY29va2llIiwiY2xvbmUiLCJwYXRoIiwianNDb29raWUiLCJjcmVhdGVKU0Nvb2tpZSIsImV4cGlyZXMiLCJleHBpcnkiLCJEYXRlIiwidG9VVENTdHJpbmciLCJkb21haW4iLCJodHRwT25seSIsInNlY3VyZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJkZWxldGVDb29raWUiLCJjb29raWVOYW1lIiwiaW5kZXhPZiIsIm1hcCIsIl9kZWxldGVDb29raWUiLCJkZWxldGVDb29raWVzIiwibGVuZ3RoIiwid2ViQ29va2llIiwiZXhwaXJlQ29va2llIiwiY2FjaGVXZWJFbGVtZW50IiwiaXNQbGFpbk9iamVjdCIsImVsSWQiLCJ1bndyYXBFbGVtZW50IiwiY2FjaGVJZCIsImluY2x1ZGVzIiwidXVpZFY0Iiwid2ViRWxlbWVudHNDYWNoZSIsInNldCIsIndyYXBFbGVtZW50IiwiY2FjaGVXZWJFbGVtZW50cyIsInJlc3BvbnNlIiwidG9DYWNoZWQiLCJ2IiwiaXNBcnJheSIsInJlc3VsdCIsInJlZHVjZSIsImFjYyIsImtleSIsImZpbmRXZWJFbGVtZW50T3JFbGVtZW50cyIsInN0cmF0ZWd5Iiwic2VsZWN0b3IiLCJtYW55IiwiY3R4IiwiY29udGV4dEVsZW1lbnQiLCJpc05pbCIsImVsZW1lbnQiLCJkb0ZpbmQiLCJpbXBsaWNpdFdhaXRGb3JDb25kaXRpb24iLCJtZXNzYWdlIiwiaXNGdW5jdGlvbiIsIm1hdGNoIiwiTm9TdWNoRWxlbWVudEVycm9yIiwiY2xpY2tXZWJDb29yZHMiLCJjb29yZHMiLCJ0cmFuc2xhdGVXZWJDb29yZHMiLCJjdXJXZWJDb29yZHMiLCJjbGlja0Nvb3JkcyIsImFyZ3MiLCJhbHdheXNEZWZhdWx0RnJhbWUiLCJmcmFtZXMiLCJwcm9taXNlIiwid2FpdEZvckF0b20iLCJleGVjdXRlQXRvbUFzeW5jIiwicmVzcG9uc2VVcmwiLCJCIiwicmVzb2x2ZSIsInJlamVjdCIsImFzeW5jUHJvbWlzZSIsImVsT3JJZCIsImhhcyIsIlN0YWxlRWxlbWVudFJlZmVyZW5jZUVycm9yIiwiRUxFTUVOVCIsImdldCIsImNvbnZlcnRFbGVtZW50c0ZvckF0b21zIiwiYXJnIiwiaXNFcnJvclR5cGUiLCJnZXRFbGVtZW50SWQiLCJoYXNWYWx1ZSIsImdldFNhZmFyaUlzSXBob25lIiwiaXNCb29sZWFuIiwiX2lzU2FmYXJpSXBob25lIiwidXNlckFnZW50IiwidG9Mb3dlckNhc2UiLCJ3YXJuIiwiZ2V0U2FmYXJpRGV2aWNlU2l6ZSIsIndpZHRoIiwiaGVpZ2h0Iiwibm9ybUhlaWdodCIsIm5vcm1XaWR0aCIsImdldFNhZmFyaUlzTm90Y2hlZCIsIl9pc1NhZmFyaU5vdGNoZWQiLCJkZXZpY2UiLCJnZXRFeHRyYVRyYW5zbGF0ZVdlYkNvb3Jkc09mZnNldCIsInd2UG9zIiwicmVhbERpbXMiLCJ0b3BPZmZzZXQiLCJib3R0b21PZmZzZXQiLCJpc0lwaG9uZSIsIm5hdGl2ZVdlYlRhcFRhYkJhclZpc2liaWxpdHkiLCJuYXRpdmVXZWJUYXBTbWFydEFwcEJhbm5lclZpc2liaWxpdHkiLCJzYWZhcmlUYWJCYXJQb3NpdGlvbiIsImNvbXBhcmVWZXJzaW9ucyIsIm9wdHMiLCJwbGF0Zm9ybVZlcnNpb24iLCJzZXR0aW5ncyIsImdldFNldHRpbmdzIiwidGFiQmFyVmlzaWJpbGl0eSIsImxvd2VyQ2FzZSIsImJhbm5lclZpc2liaWxpdHkiLCJ0YWJCYXJQb3NpdGlvbiIsIkludmFsaWRBcmd1bWVudEVycm9yIiwiaXNOb3RjaGVkIiwib3JpZW50YXRpb24iLCJub3RjaE9mZnNldCIsImlzU2Nyb2xsZWQiLCJjb250ZXh0c0FuZFZpZXdzIiwiZ2V0Q29udGV4dHNBbmRWaWV3cyIsInRhYnMiLCJmaWx0ZXIiLCJzdGFydHNXaXRoIiwiZ2V0RXh0cmFOYXRpdmVXZWJUYXBPZmZzZXQiLCJ5Iiwib2Zmc2V0IiwiYmFubmVycyIsImZpbmROYXRpdmVFbGVtZW50T3JFbGVtZW50cyIsInRhcFdlYkVsZW1lbnROYXRpdmVseSIsImRyaXZlciIsInRleHQiLCJlbHMiLCJyZWN0IiwicHJveHlDb21tYW5kIiwiZWwyIiwicmVjdDIiLCJ4IiwiTWF0aCIsInJvdW5kIiwibmF0aXZlV2ViVGFwIiwibmF0aXZlV2ViVGFwU3RyaWN0IiwiUHJvbWlzZSIsImFsbCIsInNpemUiLCJjb29yZGluYXRlcyIsInBlcmZvcm1Ub3VjaCIsImFjdGlvbiIsIm9wdGlvbnMiLCJ3ZWJ2aWV3IiwicmV0cnlJbnRlcnZhbCIsImlnbiIsIkVycm9yIiwiY21kIiwid3ZEaW1zIiwiaW1wbGljaXRXYWl0TXMiLCJzZXRJbXBsaWNpdFdhaXQiLCJ4UmF0aW8iLCJ5UmF0aW8iLCJuZXdDb29yZHMiLCJjaGVja0ZvckFsZXJ0IiwiZ2V0QWxlcnRUZXh0IiwidGltZXIiLCJ0aW1pbmciLCJUaW1lciIsInN0YXJ0IiwidGltZWRBdG9tUHJvbWlzZSIsInRpbWVvdXQiLCJoYW5kbGVQcm9taXNlRXJyb3IiLCJwIiwib3JpZ2luYWxFcnJvciIsIkFnZ3JlZ2F0ZUVycm9yIiwiVGltZW91dEVycm9yIiwiZ2V0RHVyYXRpb24iLCJhc01pbGxpU2Vjb25kcyIsInRvRml4ZWQiLCJhbnkiLCJkZWxheSIsImlzRnVsZmlsbGVkIiwiX3dhaXRpbmdBdG9tcyIsImNvdW50IiwiYWxlcnROb3RpZmllciIsIkV2ZW50RW1pdHRlciIsImFsZXJ0TW9uaXRvciIsIm9uQWxlcnRDYWxsYmFjayIsImlzUmVzb2x2ZWQiLCJlbWl0IiwiVW5leHBlY3RlZEFsZXJ0T3BlbkVycm9yIiwib25jZSIsInRoZW4iLCJjYXRjaCIsInJlbW92ZUxpc3RlbmVyIiwibW9iaWxlV2ViTmF2IiwibmF2VHlwZSIsImFsbG93TmF2aWdhdGlvbldpdGhvdXRSZWxvYWQiLCJPYmplY3QiLCJhc3NpZ24iXSwic291cmNlcyI6WyIuLi8uLi8uLi9saWIvY29tbWFuZHMvd2ViLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJldHJ5SW50ZXJ2YWwgfSBmcm9tICdhc3luY2JveCc7XG5pbXBvcnQgeyB1dGlsLCB0aW1pbmcgfSBmcm9tICdhcHBpdW0vc3VwcG9ydCc7XG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IEIgZnJvbSAnYmx1ZWJpcmQnO1xuaW1wb3J0IHsgZXJyb3JzLCBpc0Vycm9yVHlwZSB9IGZyb20gJ2FwcGl1bS9kcml2ZXInO1xuaW1wb3J0IGNvb2tpZVV0aWxzIGZyb20gJy4uL2Nvb2tpZXMnO1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyIH0gZnJvbSAnZXZlbnRzJztcblxuY29uc3QgSVBIT05FX1RPUF9CQVJfSEVJR0hUID0gNzE7XG5jb25zdCBJUEhPTkVfU0NST0xMRURfVE9QX0JBUl9IRUlHSFQgPSA0MTtcbmNvbnN0IElQSE9ORV9YX1NDUk9MTEVEX09GRlNFVCA9IDU1O1xuY29uc3QgSVBIT05FX1hfTk9UQ0hfT0ZGU0VUX0lPUyA9IDI0O1xuY29uc3QgSVBIT05FX1hfTk9UQ0hfT0ZGU0VUX0lPU18xMyA9IDIwO1xuXG5jb25zdCBJUEhPTkVfTEFORFNDQVBFX1RPUF9CQVJfSEVJR0hUID0gNTE7XG5jb25zdCBJUEhPTkVfQk9UVE9NX0JBUl9PRkZTRVQgPSA0OTtcbmNvbnN0IFRBQl9CQVJfT0ZGU0VUID0gMzM7XG5jb25zdCBJUEhPTkVfV0VCX0NPT1JEX1NNQVJUX0FQUF9CQU5ORVJfT0ZGU0VUID0gODQ7XG5jb25zdCBJUEFEX1dFQl9DT09SRF9TTUFSVF9BUFBfQkFOTkVSX09GRlNFVCA9IDk1O1xuXG5jb25zdCBOT1RDSEVEX0RFVklDRV9TSVpFUyA9IFtcbiAge3c6IDExMjUsIGg6IDI0MzZ9LCAvLyAxMSBQcm8sIFgsIFhzXG4gIHt3OiA4MjgsIGg6IDE3OTJ9LCAvLyAxMSwgWHJcbiAge3c6IDEyNDIsIGg6IDI2ODh9LCAvLyAxMSBQcm8gTWF4LCBYcyBNYXhcbl07XG5cbmNvbnN0IHsgVzNDX1dFQl9FTEVNRU5UX0lERU5USUZJRVIgfSA9IHV0aWw7XG5cbmNvbnN0IEFUT01fV0FJVF9USU1FT1VUX01TID0gMiAqIDYwMDAwO1xuY29uc3QgQVRPTV9JTklUSUFMX1dBSVRfTVMgPSAxMDAwO1xuXG5jb25zdCBPTl9PQlNUUlVDVElOR19BTEVSVF9FVkVOVCA9ICdhbGVydCc7XG5cbmNvbnN0IFZJU0lCTEUgPSAndmlzaWJsZSc7XG5jb25zdCBJTlZJU0lCTEUgPSAnaW52aXNpYmxlJztcbmNvbnN0IERFVEVDVCA9ICdkZXRlY3QnO1xuY29uc3QgVklTSUJJTElUSUVTID0gW1ZJU0lCTEUsIElOVklTSUJMRSwgREVURUNUXTtcblxuLy8gVGhlIHBvc2l0aW9uIG9mIFNhZmFyaSdzIHRhYiAoc2VhcmNoIGJhcikuXG4vLyBTaW5jZSBpT1MgMTUsIHRoZSBiYXIgaXMgdGhlIGJvdHRvbSBieSBkZWZhdWx0LlxuY29uc3QgVEFCX0JBUl9QT1NJVElPTl9UT1AgPSAndG9wJztcbmNvbnN0IFRBQl9CQVJfUE9TSVRJT05fQk9UVE9NID0gJ2JvdHRvbSc7XG5jb25zdCBUQUJfQkFSX1BPU1NJVElPTlMgPSBbVEFCX0JBUl9QT1NJVElPTl9UT1AsIFRBQl9CQVJfUE9TSVRJT05fQk9UVE9NXTtcblxuY29uc3QgY29tbWFuZHMgPSB7fSwgaGVscGVycyA9IHt9LCBleHRlbnNpb25zID0ge307XG5cbmZ1bmN0aW9uIGlzVmFsaWRFbGVtZW50SWRlbnRpZmllciAoaWQpIHtcbiAgaWYgKCFfLmlzU3RyaW5nKGlkKSAmJiAhXy5pc051bWJlcihpZCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKF8uaXNTdHJpbmcoaWQpICYmIF8uaXNFbXB0eShpZCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKF8uaXNOdW1iZXIoaWQpICYmIGlzTmFOKGlkKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuY29tbWFuZHMuc2V0RnJhbWUgPSBhc3luYyBmdW5jdGlvbiBzZXRGcmFtZSAoZnJhbWUpIHtcbiAgaWYgKCF0aGlzLmlzV2ViQ29udGV4dCgpKSB7XG4gICAgdGhyb3cgbmV3IGVycm9ycy5Ob3RJbXBsZW1lbnRlZEVycm9yKCk7XG4gIH1cblxuICBpZiAoXy5pc051bGwoZnJhbWUpKSB7XG4gICAgdGhpcy5jdXJXZWJGcmFtZXMgPSBbXTtcbiAgICB0aGlzLmxvZy5kZWJ1ZygnTGVhdmluZyB3ZWIgZnJhbWUgYW5kIGdvaW5nIGJhY2sgdG8gZGVmYXVsdCBjb250ZW50Jyk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKGhlbHBlcnMuaGFzRWxlbWVudElkKGZyYW1lKSkge1xuICAgIGNvbnN0IGF0b21zRWxlbWVudCA9IHRoaXMuZ2V0QXRvbXNFbGVtZW50KGZyYW1lKTtcbiAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHRoaXMuZXhlY3V0ZUF0b20oJ2dldF9mcmFtZV93aW5kb3cnLCBbYXRvbXNFbGVtZW50XSk7XG4gICAgdGhpcy5sb2cuZGVidWcoYEVudGVyaW5nIG5ldyB3ZWIgZnJhbWU6ICcke3ZhbHVlLldJTkRPV30nYCk7XG4gICAgdGhpcy5jdXJXZWJGcmFtZXMudW5zaGlmdCh2YWx1ZS5XSU5ET1cpO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IGF0b20gPSBfLmlzTnVtYmVyKGZyYW1lKSA/ICdmcmFtZV9ieV9pbmRleCcgOiAnZnJhbWVfYnlfaWRfb3JfbmFtZSc7XG4gICAgY29uc3QgdmFsdWUgPSBhd2FpdCB0aGlzLmV4ZWN1dGVBdG9tKGF0b20sIFtmcmFtZV0pO1xuICAgIGlmIChfLmlzTnVsbCh2YWx1ZSkgfHwgXy5pc1VuZGVmaW5lZCh2YWx1ZS5XSU5ET1cpKSB7XG4gICAgICB0aHJvdyBuZXcgZXJyb3JzLk5vU3VjaEZyYW1lRXJyb3IoKTtcbiAgICB9XG4gICAgdGhpcy5sb2cuZGVidWcoYEVudGVyaW5nIG5ldyB3ZWIgZnJhbWU6ICcke3ZhbHVlLldJTkRPV30nYCk7XG4gICAgdGhpcy5jdXJXZWJGcmFtZXMudW5zaGlmdCh2YWx1ZS5XSU5ET1cpO1xuICB9XG59O1xuXG5jb21tYW5kcy5nZXRDc3NQcm9wZXJ0eSA9IGFzeW5jIGZ1bmN0aW9uIGdldENzc1Byb3BlcnR5IChwcm9wZXJ0eU5hbWUsIGVsKSB7XG4gIGlmICghdGhpcy5pc1dlYkNvbnRleHQoKSkge1xuICAgIHRocm93IG5ldyBlcnJvcnMuTm90SW1wbGVtZW50ZWRFcnJvcigpO1xuICB9XG5cbiAgY29uc3QgYXRvbXNFbGVtZW50ID0gdGhpcy5nZXRBdG9tc0VsZW1lbnQoZWwpO1xuICByZXR1cm4gYXdhaXQgdGhpcy5leGVjdXRlQXRvbSgnZ2V0X3ZhbHVlX29mX2Nzc19wcm9wZXJ0eScsIFthdG9tc0VsZW1lbnQsIHByb3BlcnR5TmFtZV0pO1xufTtcblxuY29tbWFuZHMuc3VibWl0ID0gYXN5bmMgZnVuY3Rpb24gc3VibWl0IChlbCkge1xuICBpZiAoIXRoaXMuaXNXZWJDb250ZXh0KCkpIHtcbiAgICB0aHJvdyBuZXcgZXJyb3JzLk5vdEltcGxlbWVudGVkRXJyb3IoKTtcbiAgfVxuXG4gIGNvbnN0IGF0b21zRWxlbWVudCA9IHRoaXMuZ2V0QXRvbXNFbGVtZW50KGVsKTtcbiAgYXdhaXQgdGhpcy5leGVjdXRlQXRvbSgnc3VibWl0JywgW2F0b21zRWxlbWVudF0pO1xufTtcblxuY29tbWFuZHMucmVmcmVzaCA9IGFzeW5jIGZ1bmN0aW9uIHJlZnJlc2ggKCkge1xuICBpZiAoIXRoaXMuaXNXZWJDb250ZXh0KCkpIHtcbiAgICB0aHJvdyBuZXcgZXJyb3JzLk5vdEltcGxlbWVudGVkRXJyb3IoKTtcbiAgfVxuXG4gIGF3YWl0IHRoaXMuZXhlY3V0ZUF0b20oJ3JlZnJlc2gnLCBbXSk7XG59O1xuXG5jb21tYW5kcy5nZXRVcmwgPSBhc3luYyBmdW5jdGlvbiBnZXRVcmwgKCkge1xuICBpZiAoIXRoaXMuaXNXZWJDb250ZXh0KCkpIHtcbiAgICB0aHJvdyBuZXcgZXJyb3JzLk5vdEltcGxlbWVudGVkRXJyb3IoKTtcbiAgfVxuXG4gIHJldHVybiBhd2FpdCB0aGlzLnJlbW90ZS5leGVjdXRlKCd3aW5kb3cubG9jYXRpb24uaHJlZicpO1xufTtcblxuY29tbWFuZHMudGl0bGUgPSBhc3luYyBmdW5jdGlvbiB0aXRsZSAoKSB7XG4gIGlmICghdGhpcy5pc1dlYkNvbnRleHQoKSkge1xuICAgIHRocm93IG5ldyBlcnJvcnMuTm90SW1wbGVtZW50ZWRFcnJvcigpO1xuICB9XG5cbiAgcmV0dXJuIGF3YWl0IHRoaXMuZXhlY3V0ZUF0b20oJ3RpdGxlJywgW10sIHRydWUpO1xufTtcblxuY29tbWFuZHMuZ2V0Q29va2llcyA9IGFzeW5jIGZ1bmN0aW9uIGdldENvb2tpZXMgKCkge1xuICBpZiAoIXRoaXMuaXNXZWJDb250ZXh0KCkpIHtcbiAgICB0aHJvdyBuZXcgZXJyb3JzLk5vdEltcGxlbWVudGVkRXJyb3IoKTtcbiAgfVxuXG4gIHRoaXMubG9nLmRlYnVnKCdSZXRyaWV2aW5nIGFsbCBjb29raWVzJyk7XG5cbiAgbGV0IHNjcmlwdCA9ICdyZXR1cm4gZG9jdW1lbnQuY29va2llJztcbiAgbGV0IGpzQ29va2llcyA9IGF3YWl0IHRoaXMuZXhlY3V0ZUF0b20oJ2V4ZWN1dGVfc2NyaXB0JywgW3NjcmlwdCwgW11dKTtcblxuICBsZXQgY29va2llcyA9IFtdO1xuICB0cnkge1xuICAgIGZvciAobGV0IFtuYW1lLCB2YWx1ZV0gb2YgXy50b1BhaXJzKGNvb2tpZVV0aWxzLmNyZWF0ZUpXUENvb2tpZSh1bmRlZmluZWQsIGpzQ29va2llcykpKSB7XG4gICAgICBjb29raWVzLnB1c2goe25hbWUsIHZhbHVlfSk7XG4gICAgfVxuICAgIHJldHVybiBjb29raWVzO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICB0aGlzLmxvZy5lcnJvcihlcnIpO1xuICAgIHRocm93IG5ldyBlcnJvcnMuVW5rbm93bkVycm9yKGBFcnJvciBwYXJzaW5nIGNvb2tpZXMgZnJvbSByZXN1bHQ6ICcke2pzQ29va2llc30nYCk7XG4gIH1cbn07XG5cbmNvbW1hbmRzLnNldENvb2tpZSA9IGFzeW5jIGZ1bmN0aW9uIHNldENvb2tpZSAoY29va2llKSB7XG4gIGlmICghdGhpcy5pc1dlYkNvbnRleHQoKSkge1xuICAgIHRocm93IG5ldyBlcnJvcnMuTm90SW1wbGVtZW50ZWRFcnJvcigpO1xuICB9XG5cbiAgY29va2llID0gXy5jbG9uZShjb29raWUpO1xuXG4gIC8vIGlmIGBwYXRoYCBmaWVsZCBpcyBub3Qgc3BlY2lmaWVkLCBTYWZhcmkgd2lsbCBub3QgdXBkYXRlIGNvb2tpZXMgYXMgZXhwZWN0ZWQ7IGVnIGlzc3VlICMxNzA4XG4gIGlmICghY29va2llLnBhdGgpIHtcbiAgICBjb29raWUucGF0aCA9ICcvJztcbiAgfVxuXG4gIGNvbnN0IGpzQ29va2llID0gY29va2llVXRpbHMuY3JlYXRlSlNDb29raWUoY29va2llLm5hbWUsIGNvb2tpZS52YWx1ZSwge1xuICAgIGV4cGlyZXM6IF8uaXNOdW1iZXIoY29va2llLmV4cGlyeSkgPyAobmV3IERhdGUoY29va2llLmV4cGlyeSAqIDEwMDApKS50b1VUQ1N0cmluZygpIDpcbiAgICAgIGNvb2tpZS5leHBpcnksXG4gICAgcGF0aDogY29va2llLnBhdGgsXG4gICAgZG9tYWluOiBjb29raWUuZG9tYWluLFxuICAgIGh0dHBPbmx5OiBjb29raWUuaHR0cE9ubHksXG4gICAgc2VjdXJlOiBjb29raWUuc2VjdXJlXG4gIH0pO1xuICBsZXQgc2NyaXB0ID0gYGRvY3VtZW50LmNvb2tpZSA9ICR7SlNPTi5zdHJpbmdpZnkoanNDb29raWUpfWA7XG4gIGF3YWl0IHRoaXMuZXhlY3V0ZUF0b20oJ2V4ZWN1dGVfc2NyaXB0JywgW3NjcmlwdCwgW11dKTtcbn07XG5cbmNvbW1hbmRzLmRlbGV0ZUNvb2tpZSA9IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUNvb2tpZSAoY29va2llTmFtZSkge1xuICBpZiAoIXRoaXMuaXNXZWJDb250ZXh0KCkpIHtcbiAgICB0aHJvdyBuZXcgZXJyb3JzLk5vdEltcGxlbWVudGVkRXJyb3IoKTtcbiAgfVxuXG4gIC8vIGNoZWNrIGNvb2tpZSBleGlzdGVuY2VcbiAgbGV0IGNvb2tpZXMgPSBhd2FpdCB0aGlzLmdldENvb2tpZXMoKTtcbiAgaWYgKF8uaW5kZXhPZihfLm1hcChjb29raWVzLCAnbmFtZScpLCBjb29raWVOYW1lKSA9PT0gLTEpIHtcbiAgICB0aGlzLmxvZy5kZWJ1ZyhgQ29va2llICcke2Nvb2tpZU5hbWV9JyBub3QgZm91bmQuIElnbm9yaW5nLmApO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIGF3YWl0IHRoaXMuX2RlbGV0ZUNvb2tpZShjb29raWVOYW1lKTtcbn07XG5cbmNvbW1hbmRzLmRlbGV0ZUNvb2tpZXMgPSBhc3luYyBmdW5jdGlvbiBkZWxldGVDb29raWVzICgpIHtcbiAgaWYgKCF0aGlzLmlzV2ViQ29udGV4dCgpKSB7XG4gICAgdGhyb3cgbmV3IGVycm9ycy5Ob3RJbXBsZW1lbnRlZEVycm9yKCk7XG4gIH1cblxuICBsZXQgY29va2llcyA9IGF3YWl0IHRoaXMuZ2V0Q29va2llcygpO1xuICBpZiAoY29va2llcy5sZW5ndGgpIHtcbiAgICBmb3IgKGxldCBjb29raWUgb2YgY29va2llcykge1xuICAgICAgYXdhaXQgdGhpcy5fZGVsZXRlQ29va2llKGNvb2tpZS5uYW1lKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5oZWxwZXJzLl9kZWxldGVDb29raWUgPSBhc3luYyBmdW5jdGlvbiBfZGVsZXRlQ29va2llIChjb29raWVOYW1lKSB7XG4gIHRoaXMubG9nLmRlYnVnKGBEZWxldGluZyBjb29raWUgJyR7Y29va2llTmFtZX0nYCk7XG4gIGxldCB3ZWJDb29raWUgPSBjb29raWVVdGlscy5leHBpcmVDb29raWUoY29va2llTmFtZSwge3BhdGg6ICcvJ30pO1xuICBsZXQgc2NyaXB0ID0gYGRvY3VtZW50LmNvb2tpZSA9ICR7SlNPTi5zdHJpbmdpZnkod2ViQ29va2llKX1gO1xuICBhd2FpdCB0aGlzLmV4ZWN1dGVBdG9tKCdleGVjdXRlX3NjcmlwdCcsIFtzY3JpcHQsIFtdXSk7XG59O1xuXG5oZWxwZXJzLmNhY2hlV2ViRWxlbWVudCA9IGZ1bmN0aW9uIGNhY2hlV2ViRWxlbWVudCAoZWwpIHtcbiAgaWYgKCFfLmlzUGxhaW5PYmplY3QoZWwpKSB7XG4gICAgcmV0dXJuIGVsO1xuICB9XG4gIGNvbnN0IGVsSWQgPSB1dGlsLnVud3JhcEVsZW1lbnQoZWwpO1xuICBpZiAoIWlzVmFsaWRFbGVtZW50SWRlbnRpZmllcihlbElkKSkge1xuICAgIHJldHVybiBlbDtcbiAgfVxuICAvLyBJbiBuZXdlciBkZWJ1Z2dlciByZWxlYXNlcyBlbGVtZW50IGlkZW50aWZpZXJzIGxvb2sgbGlrZSBgOndkYzoxNjI4MTUxNjQ5MzI1YFxuICAvLyBXZSBhc3N1bWUgaXQgaXMgc2FmZSB0byB1c2UgdGhlc2UgdG8gaWRlbnRpZnkgY2FjaGVkIGVsZW1lbnRzXG4gIGNvbnN0IGNhY2hlSWQgPSBfLmluY2x1ZGVzKGVsSWQsICc6JykgPyBlbElkIDogdXRpbC51dWlkVjQoKTtcbiAgdGhpcy53ZWJFbGVtZW50c0NhY2hlLnNldChjYWNoZUlkLCBlbElkKTtcbiAgcmV0dXJuIHV0aWwud3JhcEVsZW1lbnQoY2FjaGVJZCk7XG59O1xuXG5oZWxwZXJzLmNhY2hlV2ViRWxlbWVudHMgPSBmdW5jdGlvbiBjYWNoZVdlYkVsZW1lbnRzIChyZXNwb25zZSkge1xuICBjb25zdCB0b0NhY2hlZCA9ICh2KSA9PiBfLmlzQXJyYXkodikgfHwgXy5pc1BsYWluT2JqZWN0KHYpXG4gICAgPyB0aGlzLmNhY2hlV2ViRWxlbWVudHModilcbiAgICA6IHY7XG5cbiAgaWYgKF8uaXNBcnJheShyZXNwb25zZSkpIHtcbiAgICByZXR1cm4gcmVzcG9uc2UubWFwKHRvQ2FjaGVkKTtcbiAgfSBlbHNlIGlmIChfLmlzUGxhaW5PYmplY3QocmVzcG9uc2UpKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gey4uLnJlc3BvbnNlLCAuLi4odGhpcy5jYWNoZVdlYkVsZW1lbnQocmVzcG9uc2UpKX07XG4gICAgcmV0dXJuIF8udG9QYWlycyhyZXN1bHQpLnJlZHVjZShcbiAgICAgIChhY2MsIFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICBhY2Nba2V5XSA9IHRvQ2FjaGVkKHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgIH0sIHt9XG4gICAgKTtcbiAgfVxuICByZXR1cm4gcmVzcG9uc2U7XG59O1xuXG5leHRlbnNpb25zLmZpbmRXZWJFbGVtZW50T3JFbGVtZW50cyA9IGFzeW5jIGZ1bmN0aW9uIGZpbmRXZWJFbGVtZW50T3JFbGVtZW50cyAoc3RyYXRlZ3ksIHNlbGVjdG9yLCBtYW55LCBjdHgpIHtcbiAgY29uc3QgY29udGV4dEVsZW1lbnQgPSBfLmlzTmlsKGN0eCkgPyBudWxsIDogdGhpcy5nZXRBdG9tc0VsZW1lbnQoY3R4KTtcbiAgbGV0IGVsZW1lbnQ7XG4gIGxldCBkb0ZpbmQgPSBhc3luYyAoKSA9PiB7XG4gICAgZWxlbWVudCA9IGF3YWl0IHRoaXMuZXhlY3V0ZUF0b20oYGZpbmRfZWxlbWVudCR7bWFueSA/ICdzJyA6ICcnfWAsIFtzdHJhdGVneSwgc2VsZWN0b3IsIGNvbnRleHRFbGVtZW50XSk7XG4gICAgcmV0dXJuICFfLmlzTnVsbChlbGVtZW50KTtcbiAgfTtcbiAgdHJ5IHtcbiAgICBhd2FpdCB0aGlzLmltcGxpY2l0V2FpdEZvckNvbmRpdGlvbihkb0ZpbmQpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBpZiAoZXJyLm1lc3NhZ2UgJiYgXy5pc0Z1bmN0aW9uKGVyci5tZXNzYWdlLm1hdGNoKSAmJiBlcnIubWVzc2FnZS5tYXRjaCgvQ29uZGl0aW9uIHVubWV0LykpIHtcbiAgICAgIC8vIGNvbmRpdGlvbiB3YXMgbm90IG1ldCBzZXR0aW5nIHJlcyB0byBlbXB0eSBhcnJheVxuICAgICAgZWxlbWVudCA9IFtdO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9XG5cbiAgaWYgKG1hbnkpIHtcbiAgICByZXR1cm4gdGhpcy5jYWNoZVdlYkVsZW1lbnRzKGVsZW1lbnQpO1xuICB9XG4gIGlmIChfLmlzRW1wdHkoZWxlbWVudCkpIHtcbiAgICB0aHJvdyBuZXcgZXJyb3JzLk5vU3VjaEVsZW1lbnRFcnJvcigpO1xuICB9XG4gIHJldHVybiB0aGlzLmNhY2hlV2ViRWxlbWVudHMoZWxlbWVudCk7XG59O1xuXG5leHRlbnNpb25zLmNsaWNrV2ViQ29vcmRzID0gYXN5bmMgZnVuY3Rpb24gY2xpY2tXZWJDb29yZHMgKCkge1xuICBsZXQgY29vcmRzID0gYXdhaXQgdGhpcy50cmFuc2xhdGVXZWJDb29yZHModGhpcy5jdXJXZWJDb29yZHMpO1xuICBhd2FpdCB0aGlzLmNsaWNrQ29vcmRzKGNvb3Jkcyk7XG59O1xuXG5oZWxwZXJzLmV4ZWN1dGVBdG9tID0gYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZUF0b20gKGF0b20sIGFyZ3MsIGFsd2F5c0RlZmF1bHRGcmFtZSA9IGZhbHNlKSB7XG4gIGxldCBmcmFtZXMgPSBhbHdheXNEZWZhdWx0RnJhbWUgPT09IHRydWUgPyBbXSA6IHRoaXMuY3VyV2ViRnJhbWVzO1xuICBsZXQgcHJvbWlzZSA9IHRoaXMucmVtb3RlLmV4ZWN1dGVBdG9tKGF0b20sIGFyZ3MsIGZyYW1lcyk7XG4gIHJldHVybiBhd2FpdCB0aGlzLndhaXRGb3JBdG9tKHByb21pc2UpO1xufTtcblxuaGVscGVycy5leGVjdXRlQXRvbUFzeW5jID0gYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZUF0b21Bc3luYyAoYXRvbSwgYXJncywgcmVzcG9uc2VVcmwpIHtcbiAgLy8gc2F2ZSB0aGUgcmVzb2x2ZSBhbmQgcmVqZWN0IG1ldGhvZHMgb2YgdGhlIHByb21pc2UgdG8gYmUgd2FpdGVkIGZvclxuICBsZXQgcHJvbWlzZSA9IG5ldyBCKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICB0aGlzLmFzeW5jUHJvbWlzZSA9IHtyZXNvbHZlLCByZWplY3R9O1xuICB9KTtcbiAgYXdhaXQgdGhpcy5yZW1vdGUuZXhlY3V0ZUF0b21Bc3luYyhhdG9tLCBhcmdzLCB0aGlzLmN1cldlYkZyYW1lcywgcmVzcG9uc2VVcmwpO1xuICByZXR1cm4gYXdhaXQgdGhpcy53YWl0Rm9yQXRvbShwcm9taXNlKTtcbn07XG5cbmhlbHBlcnMuZ2V0QXRvbXNFbGVtZW50ID0gZnVuY3Rpb24gZ2V0QXRvbXNFbGVtZW50IChlbE9ySWQpIHtcbiAgY29uc3QgZWxJZCA9IHV0aWwudW53cmFwRWxlbWVudChlbE9ySWQpO1xuICBpZiAoIXRoaXMud2ViRWxlbWVudHNDYWNoZS5oYXMoZWxJZCkpIHtcbiAgICB0aHJvdyBuZXcgZXJyb3JzLlN0YWxlRWxlbWVudFJlZmVyZW5jZUVycm9yKCk7XG4gIH1cbiAgcmV0dXJuIHtFTEVNRU5UOiB0aGlzLndlYkVsZW1lbnRzQ2FjaGUuZ2V0KGVsSWQpfTtcbn07XG5cbmhlbHBlcnMuY29udmVydEVsZW1lbnRzRm9yQXRvbXMgPSBmdW5jdGlvbiBjb252ZXJ0RWxlbWVudHNGb3JBdG9tcyAoYXJncyA9IFtdKSB7XG4gIHJldHVybiBhcmdzLm1hcCgoYXJnKSA9PiB7XG4gICAgaWYgKGhlbHBlcnMuaGFzRWxlbWVudElkKGFyZykpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEF0b21zRWxlbWVudChhcmcpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGlmICghaXNFcnJvclR5cGUoZXJyLCBlcnJvcnMuU3RhbGVFbGVtZW50UmVmZXJlbmNlRXJyb3IpKSB7XG4gICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gYXJnO1xuICAgIH1cbiAgICByZXR1cm4gXy5pc0FycmF5KGFyZykgPyB0aGlzLmNvbnZlcnRFbGVtZW50c0ZvckF0b21zKGFyZykgOiBhcmc7XG4gIH0pO1xufTtcblxuaGVscGVycy5nZXRFbGVtZW50SWQgPSBmdW5jdGlvbiBnZXRFbGVtZW50SWQgKGVsZW1lbnQpIHtcbiAgcmV0dXJuIGVsZW1lbnQuRUxFTUVOVCB8fCBlbGVtZW50W1czQ19XRUJfRUxFTUVOVF9JREVOVElGSUVSXTtcbn07XG5cbmhlbHBlcnMuaGFzRWxlbWVudElkID0gZnVuY3Rpb24gaGFzRWxlbWVudElkIChlbGVtZW50KSB7XG4gIHJldHVybiB1dGlsLmhhc1ZhbHVlKGVsZW1lbnQpICYmICh1dGlsLmhhc1ZhbHVlKGVsZW1lbnQuRUxFTUVOVCkgfHwgdXRpbC5oYXNWYWx1ZShlbGVtZW50W1czQ19XRUJfRUxFTUVOVF9JREVOVElGSUVSXSkpO1xufTtcblxuZXh0ZW5zaW9ucy5nZXRTYWZhcmlJc0lwaG9uZSA9IGFzeW5jIGZ1bmN0aW9uIGdldFNhZmFyaUlzSXBob25lICgpIHtcbiAgaWYgKF8uaXNCb29sZWFuKHRoaXMuX2lzU2FmYXJpSXBob25lKSkge1xuICAgIHJldHVybiB0aGlzLl9pc1NhZmFyaUlwaG9uZTtcbiAgfVxuICB0cnkge1xuICAgIGNvbnN0IHVzZXJBZ2VudCA9IGF3YWl0IHRoaXMuZXhlY3V0ZSgncmV0dXJuIG5hdmlnYXRvci51c2VyQWdlbnQnKTtcbiAgICB0aGlzLl9pc1NhZmFyaUlwaG9uZSA9IHVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdpcGhvbmUnKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgdGhpcy5sb2cud2FybihgVW5hYmxlIHRvIGZpbmQgZGV2aWNlIHR5cGUgZnJvbSB1c2VyYWdlbnQuIEFzc3VtaW5nIGlQaG9uZWApO1xuICAgIHRoaXMubG9nLmRlYnVnKGBFcnJvcjogJHtlcnIubWVzc2FnZX1gKTtcbiAgfVxuICByZXR1cm4gdGhpcy5faXNTYWZhcmlJcGhvbmUgPz8gdHJ1ZTtcbn07XG5cbmV4dGVuc2lvbnMuZ2V0U2FmYXJpRGV2aWNlU2l6ZSA9IGFzeW5jIGZ1bmN0aW9uIGdldFNhZmFyaURldmljZVNpemUgKCkge1xuICBjb25zdCBzY3JpcHQgPSAncmV0dXJuIHtoZWlnaHQ6IHdpbmRvdy5zY3JlZW4uYXZhaWxIZWlnaHQgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbywgd2lkdGg6IHdpbmRvdy5zY3JlZW4uYXZhaWxXaWR0aCAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvfTsnO1xuICBjb25zdCB7d2lkdGgsIGhlaWdodH0gPSBhd2FpdCB0aGlzLmV4ZWN1dGUoc2NyaXB0KTtcbiAgY29uc3QgW25vcm1IZWlnaHQsIG5vcm1XaWR0aF0gPSBoZWlnaHQgPiB3aWR0aCA/IFtoZWlnaHQsIHdpZHRoXSA6IFt3aWR0aCwgaGVpZ2h0XTtcbiAgcmV0dXJuIHtcbiAgICB3aWR0aDogbm9ybVdpZHRoLFxuICAgIGhlaWdodDogbm9ybUhlaWdodCxcbiAgfTtcbn07XG5cbmV4dGVuc2lvbnMuZ2V0U2FmYXJpSXNOb3RjaGVkID0gYXN5bmMgZnVuY3Rpb24gZ2V0U2FmYXJpSXNOb3RjaGVkICgpIHtcbiAgaWYgKF8uaXNCb29sZWFuKHRoaXMuX2lzU2FmYXJpTm90Y2hlZCkpIHtcbiAgICByZXR1cm4gdGhpcy5faXNTYWZhcmlOb3RjaGVkO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB7d2lkdGgsIGhlaWdodH0gPSBhd2FpdCB0aGlzLmdldFNhZmFyaURldmljZVNpemUoKTtcbiAgICBmb3IgKGNvbnN0IGRldmljZSBvZiBOT1RDSEVEX0RFVklDRV9TSVpFUykge1xuICAgICAgaWYgKGRldmljZS53ID09PSB3aWR0aCAmJiBkZXZpY2UuaCA9PT0gaGVpZ2h0KSB7XG4gICAgICAgIHRoaXMuX2lzU2FmYXJpTm90Y2hlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICB0aGlzLmxvZy53YXJuKGBVbmFibGUgdG8gZmluZCBkZXZpY2UgdHlwZSBmcm9tIGRpbWVuc2lvbnMuIEFzc3VtaW5nIHRoZSBkZXZpY2UgaXMgbm90IG5vdGNoZWRgKTtcbiAgICB0aGlzLmxvZy5kZWJ1ZyhgRXJyb3I6ICR7ZXJyLm1lc3NhZ2V9YCk7XG4gIH1cbiAgcmV0dXJuIHRoaXMuX2lzU2FmYXJpTm90Y2hlZCA/PyBmYWxzZTtcbn07XG5cbmV4dGVuc2lvbnMuZ2V0RXh0cmFUcmFuc2xhdGVXZWJDb29yZHNPZmZzZXQgPSBhc3luYyBmdW5jdGlvbiBnZXRFeHRyYVRyYW5zbGF0ZVdlYkNvb3Jkc09mZnNldCAod3ZQb3MsIHJlYWxEaW1zKSB7XG4gIGxldCB0b3BPZmZzZXQgPSAwO1xuICBsZXQgYm90dG9tT2Zmc2V0ID0gMDtcblxuICBjb25zdCBpc0lwaG9uZSA9IGF3YWl0IHRoaXMuZ2V0U2FmYXJpSXNJcGhvbmUoKTtcblxuICAvLyBObyBuZWVkIHRvIGNoZWNrIHdoZXRoZXIgdGhlIFNtYXJ0IEFwcCBCYW5uZXIgb3IgVGFiIEJhciBpcyB2aXNpYmxlIG9yIG5vdFxuICAvLyBpZiBhbHJlYWR5IGRlZmluZWQgYnkgbmF0aXZlV2ViVGFwVGFiQmFyVmlzaWJpbGl0eSBvciBuYXRpdmVXZWJUYXBTbWFydEFwcEJhbm5lclZpc2liaWxpdHkgaW4gc2V0dGluZ3MuXG4gIGNvbnN0IHtcbiAgICBuYXRpdmVXZWJUYXBUYWJCYXJWaXNpYmlsaXR5LFxuICAgIG5hdGl2ZVdlYlRhcFNtYXJ0QXBwQmFubmVyVmlzaWJpbGl0eSxcbiAgICBzYWZhcmlUYWJCYXJQb3NpdGlvbiA9IHV0aWwuY29tcGFyZVZlcnNpb25zKHRoaXMub3B0cy5wbGF0Zm9ybVZlcnNpb24sICc+PScsICcxNS4wJykgJiYgaXNJcGhvbmVcbiAgICAgID8gVEFCX0JBUl9QT1NJVElPTl9CT1RUT00gOiBUQUJfQkFSX1BPU0lUSU9OX1RPUCxcbiAgfSA9IGF3YWl0IHRoaXMuc2V0dGluZ3MuZ2V0U2V0dGluZ3MoKTtcbiAgbGV0IHRhYkJhclZpc2liaWxpdHkgPSBfLmxvd2VyQ2FzZShuYXRpdmVXZWJUYXBUYWJCYXJWaXNpYmlsaXR5KTtcbiAgbGV0IGJhbm5lclZpc2liaWxpdHkgPSBfLmxvd2VyQ2FzZShuYXRpdmVXZWJUYXBTbWFydEFwcEJhbm5lclZpc2liaWxpdHkpO1xuICBjb25zdCB0YWJCYXJQb3NpdGlvbiA9IF8ubG93ZXJDYXNlKHNhZmFyaVRhYkJhclBvc2l0aW9uKTtcblxuICBpZiAoIVZJU0lCSUxJVElFUy5pbmNsdWRlcyh0YWJCYXJWaXNpYmlsaXR5KSkge1xuICAgIHRhYkJhclZpc2liaWxpdHkgPSBERVRFQ1Q7XG4gIH1cbiAgaWYgKCFWSVNJQklMSVRJRVMuaW5jbHVkZXMoYmFubmVyVmlzaWJpbGl0eSkpIHtcbiAgICBiYW5uZXJWaXNpYmlsaXR5ID0gREVURUNUO1xuICB9XG5cbiAgaWYgKCFUQUJfQkFSX1BPU1NJVElPTlMuaW5jbHVkZXModGFiQmFyUG9zaXRpb24pKSB7XG4gICAgdGhyb3cgbmV3IGVycm9ycy5JbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgIGAke3NhZmFyaVRhYkJhclBvc2l0aW9ufSBpcyBpbnZhbGlkIGFzIFNhZmFyaSB0YWIgYmFyIHBvc2l0aW9uLiBBdmFpbGFibGUgcG9zaXRpb25zIGFyZSAke1RBQl9CQVJfUE9TU0lUSU9OU30uYCk7XG4gIH1cblxuICBjb25zdCBpc05vdGNoZWQgPSBpc0lwaG9uZSAmJiBhd2FpdCB0aGlzLmdldFNhZmFyaUlzTm90Y2hlZCgpO1xuXG4gIGNvbnN0IG9yaWVudGF0aW9uID0gcmVhbERpbXMuaCA+IHJlYWxEaW1zLncgPyAnUE9SVFJBSVQnIDogJ0xBTkRTQ0FQRSc7XG5cbiAgY29uc3Qgbm90Y2hPZmZzZXQgPSBpc05vdGNoZWRcbiAgICA/IHV0aWwuY29tcGFyZVZlcnNpb25zKHRoaXMub3B0cy5wbGF0Zm9ybVZlcnNpb24sICc9JywgJzEzLjAnKVxuICAgICAgPyBJUEhPTkVfWF9OT1RDSF9PRkZTRVRfSU9TXzEzXG4gICAgICA6IElQSE9ORV9YX05PVENIX09GRlNFVF9JT1NcbiAgICA6IDA7XG5cbiAgY29uc3QgaXNTY3JvbGxlZCA9IGF3YWl0IHRoaXMuZXhlY3V0ZSgncmV0dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgPiAwJyk7XG4gIGlmIChpc1Njcm9sbGVkKSB7XG4gICAgdG9wT2Zmc2V0ID0gSVBIT05FX1NDUk9MTEVEX1RPUF9CQVJfSEVJR0hUICsgbm90Y2hPZmZzZXQ7XG5cbiAgICBpZiAoaXNOb3RjaGVkKSB7XG4gICAgICB0b3BPZmZzZXQgLT0gSVBIT05FX1hfU0NST0xMRURfT0ZGU0VUO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSBpUGhvbmUgaXMgbGFuZHNjYXBlIHRoZW4gdGhlcmUgaXMgbm8gdG9wIGJhclxuICAgIGlmIChvcmllbnRhdGlvbiA9PT0gJ0xBTkRTQ0FQRScgJiYgaXNJcGhvbmUpIHtcbiAgICAgIHRvcE9mZnNldCA9IDA7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRvcE9mZnNldCA9IHRhYkJhclBvc2l0aW9uID09PSBUQUJfQkFSX1BPU0lUSU9OX0JPVFRPTSA/IDAgOiBJUEhPTkVfVE9QX0JBUl9IRUlHSFQ7XG4gICAgdG9wT2Zmc2V0ICs9IG5vdGNoT2Zmc2V0O1xuICAgIHRoaXMubG9nLmRlYnVnKGB0YWJCYXJQb3NpdGlvbiBhbmQgdG9wT2Zmc2V0OiAke3RhYkJhclBvc2l0aW9ufSwgJHt0b3BPZmZzZXR9YCk7XG5cbiAgICBpZiAoaXNJcGhvbmUpIHtcbiAgICAgIGlmIChvcmllbnRhdGlvbiA9PT0gJ1BPUlRSQUlUJykge1xuICAgICAgICAvLyBUaGUgYm90dG9tIGJhciBpcyBvbmx5IHZpc2libGUgd2hlbiBwb3J0cmFpdFxuICAgICAgICBib3R0b21PZmZzZXQgPSBJUEhPTkVfQk9UVE9NX0JBUl9PRkZTRVQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0b3BPZmZzZXQgPSBJUEhPTkVfTEFORFNDQVBFX1RPUF9CQVJfSEVJR0hUO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChvcmllbnRhdGlvbiA9PT0gJ0xBTkRTQ0FQRScgfHwgIWlzSXBob25lKSB7XG4gICAgICBpZiAodGFiQmFyVmlzaWJpbGl0eSA9PT0gVklTSUJMRSkge1xuICAgICAgICB0b3BPZmZzZXQgKz0gVEFCX0JBUl9PRkZTRVQ7XG4gICAgICB9IGVsc2UgaWYgKHRhYkJhclZpc2liaWxpdHkgPT09IERFVEVDVCkge1xuICAgICAgICAvLyBUYWJzIG9ubHkgYXBwZWFyIGlmIHRoZSBkZXZpY2UgaXMgbGFuZHNjYXBlIG9yIGlmIGl0J3MgYW4gaVBhZCBzbyB3ZSBvbmx5IGNoZWNrIHZpc2liaWxpdHkgaW4gdGhpcyBjYXNlXG4gICAgICAgIC8vIEFzc3VtZSB0aGF0IGVhY2ggdGFiIGJhciBpcyBhIFdlYlZpZXdcbiAgICAgICAgY29uc3QgY29udGV4dHNBbmRWaWV3cyA9IGF3YWl0IHRoaXMuZ2V0Q29udGV4dHNBbmRWaWV3cygpO1xuICAgICAgICBjb25zdCB0YWJzID0gY29udGV4dHNBbmRWaWV3cy5maWx0ZXIoKGN0eCkgPT4gY3R4LmlkLnN0YXJ0c1dpdGgoJ1dFQlZJRVdfJykpO1xuXG4gICAgICAgIGlmICh0YWJzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICB0aGlzLmxvZy5kZWJ1ZyhgRm91bmQgJHt0YWJzLmxlbmd0aH0gdGFicy4gQXNzdW1pbmcgdGhlIHRhYiBiYXIgaXMgdmlzaWJsZWApO1xuICAgICAgICAgIHRvcE9mZnNldCArPSBUQUJfQkFSX09GRlNFVDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHRvcE9mZnNldCArPSBhd2FpdCB0aGlzLmdldEV4dHJhTmF0aXZlV2ViVGFwT2Zmc2V0KGlzSXBob25lLCBiYW5uZXJWaXNpYmlsaXR5KTtcblxuICB3dlBvcy55ICs9IHRvcE9mZnNldDtcbiAgcmVhbERpbXMuaCAtPSAodG9wT2Zmc2V0ICsgYm90dG9tT2Zmc2V0KTtcbn07XG5cbmV4dGVuc2lvbnMuZ2V0RXh0cmFOYXRpdmVXZWJUYXBPZmZzZXQgPSBhc3luYyBmdW5jdGlvbiBnZXRFeHRyYU5hdGl2ZVdlYlRhcE9mZnNldCAoaXNJcGhvbmUsIGJhbm5lclZpc2liaWxpdHkpIHtcbiAgbGV0IG9mZnNldCA9IDA7XG5cbiAgaWYgKGJhbm5lclZpc2liaWxpdHkgPT09IFZJU0lCTEUpIHtcbiAgICBvZmZzZXQgKz0gaXNJcGhvbmUgP1xuICAgICAgSVBIT05FX1dFQl9DT09SRF9TTUFSVF9BUFBfQkFOTkVSX09GRlNFVCA6XG4gICAgICBJUEFEX1dFQl9DT09SRF9TTUFSVF9BUFBfQkFOTkVSX09GRlNFVDtcbiAgfSBlbHNlIGlmIChiYW5uZXJWaXNpYmlsaXR5ID09PSBERVRFQ1QpIHtcbiAgICAvLyB0cnkgdG8gc2VlIGlmIHRoZXJlIGlzIGFuIFNtYXJ0IEFwcCBCYW5uZXJcbiAgICBjb25zdCBiYW5uZXJzID0gYXdhaXQgdGhpcy5maW5kTmF0aXZlRWxlbWVudE9yRWxlbWVudHMoJ2FjY2Vzc2liaWxpdHkgaWQnLCAnQ2xvc2UgYXBwIGRvd25sb2FkIG9mZmVyJywgdHJ1ZSk7XG4gICAgaWYgKGJhbm5lcnMubGVuZ3RoID4gMCkge1xuICAgICAgb2Zmc2V0ICs9IGlzSXBob25lID9cbiAgICAgICAgSVBIT05FX1dFQl9DT09SRF9TTUFSVF9BUFBfQkFOTkVSX09GRlNFVCA6XG4gICAgICAgIElQQURfV0VCX0NPT1JEX1NNQVJUX0FQUF9CQU5ORVJfT0ZGU0VUO1xuICAgIH1cbiAgfVxuXG4gIHRoaXMubG9nLmRlYnVnKGBBZGRpdGlvbmFsIG5hdGl2ZSB3ZWIgdGFwIG9mZnNldCBjb21wdXRlZDogJHtvZmZzZXR9YCk7XG4gIHJldHVybiBvZmZzZXQ7XG59O1xuXG5hc3luYyBmdW5jdGlvbiB0YXBXZWJFbGVtZW50TmF0aXZlbHkgKGRyaXZlciwgYXRvbXNFbGVtZW50KSB7XG4gIC8vIHRyeSB0byBnZXQgdGhlIHRleHQgb2YgdGhlIGVsZW1lbnQsIHdoaWNoIHdpbGwgYmUgYWNjZXNzaWJsZSBpbiB0aGVcbiAgLy8gbmF0aXZlIGNvbnRleHRcbiAgdHJ5IHtcbiAgICBsZXQgdGV4dCA9IGF3YWl0IGRyaXZlci5leGVjdXRlQXRvbSgnZ2V0X3RleHQnLCBbYXRvbXNFbGVtZW50XSk7XG4gICAgaWYgKCF0ZXh0KSB7XG4gICAgICB0ZXh0ID0gYXdhaXQgZHJpdmVyLmV4ZWN1dGVBdG9tKCdnZXRfYXR0cmlidXRlX3ZhbHVlJywgW2F0b21zRWxlbWVudCwgJ3ZhbHVlJ10pO1xuICAgIH1cblxuICAgIGlmICh0ZXh0KSB7XG4gICAgICBjb25zdCBlbHMgPSBhd2FpdCBkcml2ZXIuZmluZE5hdGl2ZUVsZW1lbnRPckVsZW1lbnRzKCdhY2Nlc3NpYmlsaXR5IGlkJywgdGV4dCwgdHJ1ZSk7XG4gICAgICBpZiAoZWxzLmxlbmd0aCA9PT0gMSB8fCBlbHMubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIGNvbnN0IGVsID0gZWxzWzBdO1xuICAgICAgICAvLyB1c2UgdGFwIGJlY2F1c2Ugb24gaU9TIDExLjIgYW5kIGJlbG93IGBuYXRpdmVDbGlja2AgY3Jhc2hlcyBXREFcbiAgICAgICAgY29uc3QgcmVjdCA9IGF3YWl0IGRyaXZlci5wcm94eUNvbW1hbmQoYC9lbGVtZW50LyR7dXRpbC51bndyYXBFbGVtZW50KGVsKX0vcmVjdGAsICdHRVQnKTtcbiAgICAgICAgaWYgKGVscy5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICBjb25zdCBlbDIgPSBlbHNbMV07XG4gICAgICAgICAgY29uc3QgcmVjdDIgPSBhd2FpdCBkcml2ZXIucHJveHlDb21tYW5kKGAvZWxlbWVudC8ke3V0aWwudW53cmFwRWxlbWVudChlbDIpfS9yZWN0YCwgJ0dFVCcpO1xuXG4gICAgICAgICAgaWYgKChyZWN0LnggIT09IHJlY3QyLnggfHwgcmVjdC55ICE9PSByZWN0Mi55KSB8fFxuICAgICAgICAgIChyZWN0LndpZHRoICE9PSByZWN0Mi53aWR0aCB8fCByZWN0LmhlaWdodCAhPT0gcmVjdDIuaGVpZ2h0KSkge1xuICAgICAgICAgICAgLy8gVGhlc2UgMiBuYXRpdmUgZWxlbWVudHMgYXJlIG5vdCByZWZlcnJpbmcgdG8gdGhlIHNhbWUgd2ViIGVsZW1lbnRcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29vcmRzID0ge1xuICAgICAgICAgIHg6IE1hdGgucm91bmQocmVjdC54ICsgcmVjdC53aWR0aCAvIDIpLFxuICAgICAgICAgIHk6IE1hdGgucm91bmQocmVjdC55ICsgcmVjdC5oZWlnaHQgLyAyKSxcbiAgICAgICAgfTtcbiAgICAgICAgYXdhaXQgZHJpdmVyLmNsaWNrQ29vcmRzKGNvb3Jkcyk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgLy8gYW55IGZhaWx1cmUgc2hvdWxkIGZhbGwgdGhyb3VnaCBhbmQgdHJpZ2dlciB0aGUgbW9yZSBlbGFib3JhdGVcbiAgICAvLyBtZXRob2Qgb2YgY2xpY2tpbmdcbiAgICBkcml2ZXIubG9nLndhcm4oYEVycm9yIGF0dGVtcHRpbmcgdG8gY2xpY2s6ICR7ZXJyLm1lc3NhZ2V9YCk7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5leHRlbnNpb25zLm5hdGl2ZVdlYlRhcCA9IGFzeW5jIGZ1bmN0aW9uIG5hdGl2ZVdlYlRhcCAoZWwpIHtcbiAgY29uc3QgYXRvbXNFbGVtZW50ID0gdGhpcy5nZXRBdG9tc0VsZW1lbnQoZWwpO1xuXG4gIC8vIGlmIHN0cmljdCBuYXRpdmUgdGFwLCBkbyBub3QgdHJ5IHRvIGRvIGl0IHdpdGggV0RBIGRpcmVjdGx5XG4gIGlmICghKGF3YWl0IHRoaXMuc2V0dGluZ3MuZ2V0U2V0dGluZ3MoKSkubmF0aXZlV2ViVGFwU3RyaWN0ICYmIGF3YWl0IHRhcFdlYkVsZW1lbnROYXRpdmVseSh0aGlzLCBhdG9tc0VsZW1lbnQpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHRoaXMubG9nLndhcm4oJ1VuYWJsZSB0byBkbyBzaW1wbGUgbmF0aXZlIHdlYiB0YXAuIEF0dGVtcHRpbmcgdG8gY29udmVydCBjb29yZGluYXRlcycpO1xuXG4gIC8vIGBnZXRfdG9wX2xlZnRfY29vcmRpbmF0ZXNgIHJldHVybnMgdGhlIHdyb25nIHZhbHVlIHNvbWV0aW1lcyxcbiAgLy8gdW5sZXNzIHdlIHByZS1jYWxsIGJvdGggb2YgdGhlc2UgZnVuY3Rpb25zIGJlZm9yZSB0aGUgYWN0dWFsIGNhbGxzXG4gIGF3YWl0IEIuUHJvbWlzZS5hbGwoW1xuICAgIHRoaXMuZXhlY3V0ZUF0b20oJ2dldF9zaXplJywgW2F0b21zRWxlbWVudF0pLFxuICAgIHRoaXMuZXhlY3V0ZUF0b20oJ2dldF90b3BfbGVmdF9jb29yZGluYXRlcycsIFthdG9tc0VsZW1lbnRdKSxcbiAgXSk7XG5cbiAgY29uc3QgW3NpemUsIGNvb3JkaW5hdGVzXSA9IGF3YWl0IEIuUHJvbWlzZS5hbGwoW1xuICAgIHRoaXMuZXhlY3V0ZUF0b20oJ2dldF9zaXplJywgW2F0b21zRWxlbWVudF0pLFxuICAgIHRoaXMuZXhlY3V0ZUF0b20oJ2dldF90b3BfbGVmdF9jb29yZGluYXRlcycsIFthdG9tc0VsZW1lbnRdKSxcbiAgXSk7XG4gIGNvbnN0IHt3aWR0aCwgaGVpZ2h0fSA9IHNpemU7XG4gIGxldCB7eCwgeX0gPSBjb29yZGluYXRlcztcbiAgeCArPSB3aWR0aCAvIDI7XG4gIHkgKz0gaGVpZ2h0IC8gMjtcblxuICB0aGlzLmN1cldlYkNvb3JkcyA9IHt4LCB5fTtcbiAgYXdhaXQgdGhpcy5jbGlja1dlYkNvb3JkcygpO1xufTtcblxuZXh0ZW5zaW9ucy5jbGlja0Nvb3JkcyA9IGFzeW5jIGZ1bmN0aW9uIGNsaWNrQ29vcmRzIChjb29yZHMpIHtcbiAgYXdhaXQgdGhpcy5wZXJmb3JtVG91Y2goW1xuICAgIHtcbiAgICAgIGFjdGlvbjogJ3RhcCcsXG4gICAgICBvcHRpb25zOiBjb29yZHMsXG4gICAgfSxcbiAgXSk7XG59O1xuXG5leHRlbnNpb25zLnRyYW5zbGF0ZVdlYkNvb3JkcyA9IGFzeW5jIGZ1bmN0aW9uIHRyYW5zbGF0ZVdlYkNvb3JkcyAoY29vcmRzKSB7XG4gIHRoaXMubG9nLmRlYnVnKGBUcmFuc2xhdGluZyBjb29yZGluYXRlcyAoJHtKU09OLnN0cmluZ2lmeShjb29yZHMpfSkgdG8gd2ViIGNvb3JkaW5hdGVzYCk7XG5cbiAgLy8gYWJzb2x1dGl6ZSB3ZWIgY29vcmRzXG4gIGxldCB3ZWJ2aWV3O1xuICB0cnkge1xuICAgIHdlYnZpZXcgPSBhd2FpdCByZXRyeUludGVydmFsKDUsIDEwMCwgYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5maW5kTmF0aXZlRWxlbWVudE9yRWxlbWVudHMoJ2NsYXNzIG5hbWUnLCAnWENVSUVsZW1lbnRUeXBlV2ViVmlldycsIGZhbHNlKSk7XG4gIH0gY2F0Y2ggKGlnbikge31cblxuICBpZiAoIXdlYnZpZXcpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIFdlYlZpZXcgZm91bmQuIFVuYWJsZSB0byB0cmFuc2xhdGUgd2ViIGNvb3JkaW5hdGVzIGZvciBuYXRpdmUgd2ViIHRhcC5gKTtcbiAgfVxuXG4gIHdlYnZpZXcgPSB1dGlsLnVud3JhcEVsZW1lbnQod2Vidmlldyk7XG5cbiAgY29uc3QgcmVjdCA9IGF3YWl0IHRoaXMucHJveHlDb21tYW5kKGAvZWxlbWVudC8ke3dlYnZpZXd9L3JlY3RgLCAnR0VUJyk7XG4gIGNvbnN0IHd2UG9zID0ge3g6IHJlY3QueCwgeTogcmVjdC55fTtcbiAgY29uc3QgcmVhbERpbXMgPSB7dzogcmVjdC53aWR0aCwgaDogcmVjdC5oZWlnaHR9O1xuXG4gIGNvbnN0IGNtZCA9ICcoZnVuY3Rpb24gKCkgeyByZXR1cm4ge3c6IHdpbmRvdy5pbm5lcldpZHRoLCBoOiB3aW5kb3cuaW5uZXJIZWlnaHR9OyB9KSgpJztcbiAgY29uc3Qgd3ZEaW1zID0gYXdhaXQgdGhpcy5yZW1vdGUuZXhlY3V0ZShjbWQpO1xuXG4gIC8vIGtlZXAgdHJhY2sgb2YgaW1wbGljaXQgd2FpdCwgYW5kIHNldCBsb2NhbGx5IHRvIDBcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2FwcGl1bS9hcHBpdW0vaXNzdWVzLzE0OTg4XG4gIGNvbnN0IGltcGxpY2l0V2FpdE1zID0gdGhpcy5pbXBsaWNpdFdhaXRNcztcbiAgYXdhaXQgdGhpcy5zZXRJbXBsaWNpdFdhaXQoMCk7XG4gIHRyeSB7XG4gICAgYXdhaXQgdGhpcy5nZXRFeHRyYVRyYW5zbGF0ZVdlYkNvb3Jkc09mZnNldCh3dlBvcywgcmVhbERpbXMpO1xuICB9IGZpbmFsbHkge1xuICAgIGF3YWl0IHRoaXMuc2V0SW1wbGljaXRXYWl0KGltcGxpY2l0V2FpdE1zKTtcbiAgfVxuXG4gIGlmICh3dkRpbXMgJiYgcmVhbERpbXMgJiYgd3ZQb3MpIHtcbiAgICBsZXQgeFJhdGlvID0gcmVhbERpbXMudyAvIHd2RGltcy53O1xuICAgIGxldCB5UmF0aW8gPSByZWFsRGltcy5oIC8gd3ZEaW1zLmg7XG4gICAgbGV0IG5ld0Nvb3JkcyA9IHtcbiAgICAgIHg6IHd2UG9zLnggKyBNYXRoLnJvdW5kKHhSYXRpbyAqIGNvb3Jkcy54KSxcbiAgICAgIHk6IHd2UG9zLnkgKyBNYXRoLnJvdW5kKHlSYXRpbyAqIGNvb3Jkcy55KSxcbiAgICB9O1xuXG4gICAgLy8gYWRkaXRpb25hbCBsb2dnaW5nIGZvciBjb29yZGluYXRlcywgc2luY2UgaXQgaXMgc29tZXRpbWVzIGJyb2tlblxuICAgIC8vICAgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hcHBpdW0vYXBwaXVtL2lzc3Vlcy85MTU5XG4gICAgdGhpcy5sb2cuZGVidWcoYENvbnZlcnRlZCBjb29yZGluYXRlczogJHtKU09OLnN0cmluZ2lmeShuZXdDb29yZHMpfWApO1xuICAgIHRoaXMubG9nLmRlYnVnKGAgICAgcmVjdDogJHtKU09OLnN0cmluZ2lmeShyZWN0KX1gKTtcbiAgICB0aGlzLmxvZy5kZWJ1ZyhgICAgIHd2UG9zOiAke0pTT04uc3RyaW5naWZ5KHd2UG9zKX1gKTtcbiAgICB0aGlzLmxvZy5kZWJ1ZyhgICAgIHJlYWxEaW1zOiAke0pTT04uc3RyaW5naWZ5KHJlYWxEaW1zKX1gKTtcbiAgICB0aGlzLmxvZy5kZWJ1ZyhgICAgIHd2RGltczogJHtKU09OLnN0cmluZ2lmeSh3dkRpbXMpfWApO1xuICAgIHRoaXMubG9nLmRlYnVnKGAgICAgeFJhdGlvOiAke0pTT04uc3RyaW5naWZ5KHhSYXRpbyl9YCk7XG4gICAgdGhpcy5sb2cuZGVidWcoYCAgICB5UmF0aW86ICR7SlNPTi5zdHJpbmdpZnkoeVJhdGlvKX1gKTtcblxuICAgIHRoaXMubG9nLmRlYnVnKGBDb252ZXJ0ZWQgd2ViIGNvb3JkcyAke0pTT04uc3RyaW5naWZ5KGNvb3Jkcyl9IGAgK1xuICAgICAgYGludG8gcmVhbCBjb29yZHMgJHtKU09OLnN0cmluZ2lmeShuZXdDb29yZHMpfWApO1xuICAgIHJldHVybiBuZXdDb29yZHM7XG4gIH1cbn07XG5cbmV4dGVuc2lvbnMuY2hlY2tGb3JBbGVydCA9IGFzeW5jIGZ1bmN0aW9uIGNoZWNrRm9yQWxlcnQgKCkge1xuICByZXR1cm4gXy5pc1N0cmluZyhhd2FpdCB0aGlzLmdldEFsZXJ0VGV4dCgpKTtcbn07XG5cbmV4dGVuc2lvbnMud2FpdEZvckF0b20gPSBhc3luYyBmdW5jdGlvbiB3YWl0Rm9yQXRvbSAocHJvbWlzZSkge1xuICBjb25zdCB0aW1lciA9IG5ldyB0aW1pbmcuVGltZXIoKS5zdGFydCgpO1xuXG4gIC8vIG5lZWQgdG8gY2hlY2sgZm9yIGFsZXJ0IHdoaWxlIHRoZSBhdG9tIGlzIGJlaW5nIGV4ZWN1dGVkLlxuICAvLyBzbyBub3RpZnkgb3Vyc2VsdmVzIHdoZW4gaXQgaGFwcGVuc1xuICBjb25zdCB0aW1lZEF0b21Qcm9taXNlID0gQi5yZXNvbHZlKHByb21pc2UpLnRpbWVvdXQoQVRPTV9XQUlUX1RJTUVPVVRfTVMpO1xuICBjb25zdCBoYW5kbGVQcm9taXNlRXJyb3IgPSBhc3luYyAocCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgcDtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnN0IG9yaWdpbmFsRXJyb3IgPSAoZXJyIGluc3RhbmNlb2YgQi5BZ2dyZWdhdGVFcnJvcikgPyBlcnJbMF0gOiBlcnI7XG4gICAgICB0aGlzLmxvZy5kZWJ1ZyhgRXJyb3IgcmVjZWl2ZWQgd2hpbGUgZXhlY3V0aW5nIGF0b206ICR7b3JpZ2luYWxFcnJvci5tZXNzYWdlfWApO1xuICAgICAgaWYgKG9yaWdpbmFsRXJyb3IgaW5zdGFuY2VvZiBCLlRpbWVvdXRFcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYERpZCBub3QgZ2V0IGFueSByZXNwb25zZSBmb3IgYXRvbSBleGVjdXRpb24gYWZ0ZXIgYCArXG4gICAgICAgICAgYCR7dGltZXIuZ2V0RHVyYXRpb24oKS5hc01pbGxpU2Vjb25kcy50b0ZpeGVkKDApfW1zYCk7XG4gICAgICB9XG4gICAgICB0aHJvdyBvcmlnaW5hbEVycm9yO1xuICAgIH1cbiAgfTtcbiAgLy8gaWYgdGhlIGF0b20gcHJvbWlzZSBpcyBmdWxmaWxsZWQgd2l0aGluIEFUT01fSU5JVElBTF9XQUlUX01TXG4gIC8vIHRoZW4gd2UgZG9uJ3QgbmVlZCB0byBjaGVjayBmb3IgYW4gYWxlcnQgcHJlc2VuY2VcbiAgYXdhaXQgaGFuZGxlUHJvbWlzZUVycm9yKEIuYW55KFtCLmRlbGF5KEFUT01fSU5JVElBTF9XQUlUX01TKSwgdGltZWRBdG9tUHJvbWlzZV0pKTtcbiAgaWYgKHRpbWVkQXRvbVByb21pc2UuaXNGdWxmaWxsZWQoKSkge1xuICAgIHJldHVybiBhd2FpdCB0aW1lZEF0b21Qcm9taXNlO1xuICB9XG5cbiAgLy8gLi4ub3RoZXJ3aXNlIG1ha2Ugc3VyZSB0aGVyZSBpcyBubyB1bmV4cGVjdGVkIGFsZXJ0IGNvdmVyaW5nIHRoZSBlbGVtZW50XG4gIGlmICghXy5pc1BsYWluT2JqZWN0KHRoaXMuX3dhaXRpbmdBdG9tcykpIHtcbiAgICB0aGlzLl93YWl0aW5nQXRvbXMgPSB7XG4gICAgICBjb3VudDogMCxcbiAgICAgIGFsZXJ0Tm90aWZpZXI6IG5ldyBFdmVudEVtaXR0ZXIoKSxcbiAgICAgIGFsZXJ0TW9uaXRvcjogQi5yZXNvbHZlKCksXG4gICAgfTtcbiAgfVxuICB0aGlzLl93YWl0aW5nQXRvbXMuY291bnQrKztcblxuICBsZXQgb25BbGVydENhbGxiYWNrO1xuICB0cnkge1xuICAgIC8vIG9ubHkgcmVzdGFydCB0aGUgbW9uaXRvciBpZiBpdCBpcyBub3QgcnVubmluZyBhbHJlYWR5XG4gICAgaWYgKHRoaXMuX3dhaXRpbmdBdG9tcy5hbGVydE1vbml0b3IuaXNSZXNvbHZlZCgpKSB7XG4gICAgICB0aGlzLl93YWl0aW5nQXRvbXMuYWxlcnRNb25pdG9yID0gQi5yZXNvbHZlKChhc3luYyAoKSA9PiB7XG4gICAgICAgIHdoaWxlICh0aGlzLl93YWl0aW5nQXRvbXMuY291bnQgPiAwKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChhd2FpdCB0aGlzLmNoZWNrRm9yQWxlcnQoKSkge1xuICAgICAgICAgICAgICB0aGlzLl93YWl0aW5nQXRvbXMuYWxlcnROb3RpZmllci5lbWl0KE9OX09CU1RSVUNUSU5HX0FMRVJUX0VWRU5UKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChpZ24pIHt9XG4gICAgICAgICAgYXdhaXQgQi5kZWxheShBVE9NX0lOSVRJQUxfV0FJVF9NUyAvIDIpO1xuICAgICAgICB9XG4gICAgICB9KSgpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYXdhaXQgbmV3IEIoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgb25BbGVydENhbGxiYWNrID0gKCkgPT4gcmVqZWN0KG5ldyBlcnJvcnMuVW5leHBlY3RlZEFsZXJ0T3BlbkVycm9yKCkpO1xuICAgICAgdGhpcy5fd2FpdGluZ0F0b21zLmFsZXJ0Tm90aWZpZXIub25jZShPTl9PQlNUUlVDVElOR19BTEVSVF9FVkVOVCwgb25BbGVydENhbGxiYWNrKTtcbiAgICAgIGhhbmRsZVByb21pc2VFcnJvcih0aW1lZEF0b21Qcm9taXNlKVxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJvbWlzZS9wcmVmZXItYXdhaXQtdG8tdGhlblxuICAgICAgICAudGhlbihyZXNvbHZlKVxuICAgICAgICAuY2F0Y2gocmVqZWN0KTtcbiAgICB9KTtcbiAgfSBmaW5hbGx5IHtcbiAgICBpZiAob25BbGVydENhbGxiYWNrKSB7XG4gICAgICB0aGlzLl93YWl0aW5nQXRvbXMuYWxlcnROb3RpZmllci5yZW1vdmVMaXN0ZW5lcihPTl9PQlNUUlVDVElOR19BTEVSVF9FVkVOVCwgb25BbGVydENhbGxiYWNrKTtcbiAgICB9XG4gICAgdGhpcy5fd2FpdGluZ0F0b21zLmNvdW50LS07XG4gIH1cbn07XG5cbmV4dGVuc2lvbnMubW9iaWxlV2ViTmF2ID0gYXN5bmMgZnVuY3Rpb24gbW9iaWxlV2ViTmF2IChuYXZUeXBlKSB7XG4gIHRoaXMucmVtb3RlLmFsbG93TmF2aWdhdGlvbldpdGhvdXRSZWxvYWQgPSB0cnVlO1xuICB0cnkge1xuICAgIGF3YWl0IHRoaXMuZXhlY3V0ZUF0b20oJ2V4ZWN1dGVfc2NyaXB0JywgW2BoaXN0b3J5LiR7bmF2VHlwZX0oKTtgLCBudWxsXSk7XG4gIH0gZmluYWxseSB7XG4gICAgdGhpcy5yZW1vdGUuYWxsb3dOYXZpZ2F0aW9uV2l0aG91dFJlbG9hZCA9IGZhbHNlO1xuICB9XG59O1xuXG5PYmplY3QuYXNzaWduKGNvbW1hbmRzLCBleHRlbnNpb25zLCBoZWxwZXJzKTtcblxuZXhwb3J0IGRlZmF1bHQgY29tbWFuZHM7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQSxNQUFNQSxxQkFBcUIsR0FBRyxFQUFFO0FBQ2hDLE1BQU1DLDhCQUE4QixHQUFHLEVBQUU7QUFDekMsTUFBTUMsd0JBQXdCLEdBQUcsRUFBRTtBQUNuQyxNQUFNQyx5QkFBeUIsR0FBRyxFQUFFO0FBQ3BDLE1BQU1DLDRCQUE0QixHQUFHLEVBQUU7QUFFdkMsTUFBTUMsK0JBQStCLEdBQUcsRUFBRTtBQUMxQyxNQUFNQyx3QkFBd0IsR0FBRyxFQUFFO0FBQ25DLE1BQU1DLGNBQWMsR0FBRyxFQUFFO0FBQ3pCLE1BQU1DLHdDQUF3QyxH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